{"mappings":"gfAAAA,EAAA,a,KCCAC,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQE,QACR,SAAyBC,EAAKC,EAAKH,GAC3BG,KAAOD,EACPL,OAAOC,eAAeI,EAAKC,EAAK,CAC5BH,MAAOA,EACPI,YAAY,EACZC,cAAc,EACdC,UAAU,IAGdJ,EAAIC,GAAOH,EAEf,OAAOE,C,iBDbLK,EAAWC,SAASC,cAAc,UAWpB,WAClB,GAAiC,IAA7BF,EAASG,SAASC,OAAc,CAClCC,QAAQC,IAAI,SAGZN,EAASO,UADP,4F,CAGJF,QAAQC,IAAI,Y,CAfdE,GAmBA,WAGqC,IAA7BC,EAAOnB,OAAOmB,KAAKC,cAGnBC,EAAiB,GAGlBC,GAAS,EAATC,GAAS,EAATC,OAASC,E,IAAd,QAAKC,EAAAC,EAAaR,EAAIS,OAAAC,cAAjBP,GAAAI,EAAAC,EAASG,QAAAC,MAATT,GAAS,EAAU,CAAnB,IAAMhB,EAANoB,EAASvB,MAGZ,GADe,wBACD6B,KAAK1B,GAAM,CAEuB,IAAxC2B,EAAWC,KAAKC,MAAMf,aAAagB,QAAQ9B,IAEZe,EAAtBf,GAAO2B,C,YAPrBV,GAAS,EAATC,EAASa,C,aAATf,GAAS,MAATK,EAASW,QAATX,EAASW,Q,YAATf,E,MAAAC,C,EAYmC,IAApCe,EAAS,GACRC,GAAS,EAATC,GAAS,EAATC,OAASjB,E,IAAd,QAAKkB,EAAAC,EAAa5C,OAAOmB,KAAKE,GAAeO,OAAAC,cAAxCW,GAAAG,EAAAC,EAASd,QAAAC,MAATS,GAAS,EAAiC,CAA1C,IAAMK,EAANF,EAASxC,MAEUoC,GAAZ,yFAEsBO,OAAJD,EAAI,sG,IAM3BE,GAAa,EAAbC,GAAa,EAAbC,OAAaxB,E,IAAlB,QAAKyB,EAAAC,EAAiB9B,EAAewB,GAAIjB,OAAAC,cAApCkB,GAAAG,EAAAC,EAAarB,QAAAC,MAAbgB,GAAa,GAAb,IAAMK,EAANF,EAAa/C,MAEkBoC,GAAvB,OAAqBO,OAAdM,EAAQC,MAAM,Q,WAF7BL,GAAa,EAAbC,EAAaZ,C,aAAbU,GAAa,MAAbI,EAAab,QAAba,EAAab,Q,YAAbU,E,MAAAC,C,EAILV,GAAU,O,WAdPE,GAAS,EAATC,EAASY,C,aAATd,GAAS,MAATI,EAASN,QAATM,EAASN,Q,YAATG,E,MAAAC,C,EAkBqChC,EAAjCO,UAAYsB,C,CAzDvBgB,E","sources":["src/js/read-markup.js","node_modules/@swc/helpers/lib/_define_property.js"],"sourcesContent":["const API_KEY = 'u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn';\nconst URL_SEARCH = 'https://api.nytimes.com/svc/search/v2/articlesearch.json';\n\nconst readList = document.querySelector('.read');\n\n\nisReadEmpty();\n// getReadKeys();\ntestMarkup2();\n// testMarkupWithFilter();\n// createReadPage();\n\n\n// Для порожньої сторінки\nfunction isReadEmpty() {\n  if (readList.children.length === 0) {\n    console.log('empty');\n    const markup =\n      '<li class=\"read-item-empty\"><h2>Nothing read yet</h2><div class=\"read-empty\"></div></li > ';\n    readList.innerHTML = markup;\n  }\n  console.log('Not empty');\n}\n\n\nfunction testMarkup2() {\n\n  // отримуємо всі ключі з локального сховища\n  const keys = Object.keys(localStorage);\n\n  // створюємо об'єкт для зберігання списку статей за датами\n  const articlesByDate = {};\n\n  // перебираємо всі ключі з локального сховища\n  for (const key of keys) {\n    // перевіряємо, чи є ключ датою у форматі 02/03/2023\n    const dateRegex = /^\\d{2}\\/\\d{2}\\/\\d{4}$/;\n    if (dateRegex.test(key)) {\n      // якщо ключ є датою, отримуємо список статей для цієї дати\n      const articles = JSON.parse(localStorage.getItem(key));\n      // додаємо цей список статей до списку за датою\n      articlesByDate[key] = articles;\n    }\n  }\n\n  // створюємо HTML-розмітку для списку статей за датами\n  let markup = '';\n  for (const key of Object.keys(articlesByDate)) {\n    // додаємо заголовок з датою\n    markup += `<li class=\"read-item\">\n      <div class=\"read-title\">\n        <h2 class=\"read-date\">${key}</h2>\n        <div class=\"read-arrow\"></div>\n      </div>\n      <ul class=\"read-gallery\">\n    `;\n    // створюємо список статей\n    for (const article of articlesByDate[key]) {\n      // додаємо елемент списку з назвою статті\n       markup += `<li>${article.title}</li>`;\n    }\n    markup += '</ul>';\n  }\n\n  // вставляємо HTML-розмітку у елемент з ідентифікатором 'articles'\n  readList.innerHTML = markup;\n}\n\n\n\n\n\nfunction testMarkup() {\n  // Отримуємо всі ключі з localStorage\n  const keys = Object.keys(localStorage);\n\n  // Фільтруємо ключі за заданим форматом дати\n  const dateRegex = /^\\d{2}\\/\\d{2}\\/\\d{4}$/;\n  const filteredKeys = keys.filter(key => dateRegex.test(key));\n\n  // Створюємо розмітку для кожного ключа та його значення\n  const markup = filteredKeys\n    .map(key => {\n      const articles = JSON.parse(localStorage.getItem(key));\n      console.log(articles);\n\n      const paragraphs = articles.map(item => `<p>${item}</p>`).join('');\n      return `<h2>${key}</h2>${paragraphs}`;\n    })\n    .join('');\n\n  // Додаємо розмітку в тег body\n  readList.innerHTML = markup;\n}\n\n// Формуємо сторінку\nasync function createReadPage() {\n  let markupList = '';\n  let markup = '';\n  let markupAll = '';\n  readList.innerHTML = '';\n  for (let i = 0; i < localStorage.length; i += 1) {\n    let storageKey = localStorage.key(i);\n    const dateRegex = /^\\d{2}\\/\\d{2}\\/\\d{4}$/;\n    if (dateRegex.test(storageKey)) {\n      // малюємо першу розмітку\n      \n      markupList = markupList + createReadList(storageKey);\n      console.log(storageKey);\n      // const value = localStorage.getItem(storageKey)\n      // console.log(value);\n\n      const values = JSON.parse(localStorage.getItem(storageKey));\n      console.log(values);\n      // for (let i = 0; i < values.length; i += 1) {\n      //   let query = values[i];\n      //   console.log(query);\n      //   const data = await getReadNews(query);\n      //   const news = data.response.docs;\n      //   // console.log(news);\n      //   markup = markup + createReadNews(news[0]);\n        \n      // }\n      markupAll = markupList + markup\n      // const readItem = document.querySelector('.read');\n      // readItem.insertAdjacentHTML('beforeend', markup);\n    }\n    \n  } readList.insertAdjacentHTML('beforeend', markupAll);\n}\n// Формуємо галерею\nfunction createReadList(storageKey) {\n  // const dateTitle = storageKey;\n  return `\n  <li class=\"read-item\">\n      <div class=\"read-title\">\n        <h2 class=\"read-date\">${storageKey}</h2>\n        <div class=\"read-arrow\"></div>\n      </div>\n      <ul class=\"read-gallery\">\n      </ul>\n  </li>\n        `;\n}\n\n// Формуємо картку новини\nfunction createReadNews(news) {\n  const title = news.headline.main;\n  const isFavorite = true;\n\n  const photoUrl =\n    news.multimedia !== 0\n      ? `https://static01.nyt.com/${news.multimedia[0].url}`\n      : 'https://via.placeholder.com/400';\n\n  const { _id, section_name, abstract, pub_date, web_url } = news;\n\n  return `\n         <li>\n          <div class=\"news-card\">\n            <img src=\"${photoUrl}\" alt=\"заглушка\" />\n            <div class=\"news-card__info\">\n              <div class=\"news-card__category\">${section_name}</div>\n              <button class=\"news-card__favorite-btn ${\n                isFavorite ? 'active_btn' : ''\n              }\" data-news-id=\"${_id}\">\n                ${isFavorite ? 'Remove from Favorite' : 'Add to Favorite'}\n              </button>\n              <h2 class=\"news-card__title\">${title}</h2>\n              <p class=\"news-card__description\">${\n                abstract.length > 100\n                  ? abstract.substring(0, 100) + '...'\n                  : abstract\n              }</p>\n              <div class=\"news-card__date-div\">\n              <div class=\"news-card__date\">${new Date(\n                pub_date\n              ).toLocaleDateString()}</div>\n              <a class=\"news-card__read-more\" href=\"${web_url}\" target=\"_blank\">Read more</a>\n              </div>\n            </div>\n          </div>\n         </div>\n      </div>\n    </li>\n         `;\n}\n\n// Відправляємо запит\n\nasync function getReadNews(query) {\n  try {\n    return await fetch(\n      `${URL_SEARCH}?fq=_id:(\"${query}\")&api-key=${API_KEY}`\n    ).then(resp => resp.json());\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n// Перевірка наявності в локал сторідж ключів потрібного формата\n// const keys = Object.keys(localStorage);\n\n// keys.filter(key => /^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(key)).forEach(key => {\n//   const value = localStorage.getItem(key);\n//   console.log(`Значення для ключа ${key}: ${value}`);\n// });\n\n// function getReadKeys() {\n//   const keys = Object.keys(localStorage);\n//   keys.filter(key => /^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(key)).forEach(key => {\n//   const value = localStorage.getItem(key);\n//   console.log(`Значення для ключа ${key}: ${value}`);\n// });\n// };\n\n// ===============================================\n// function testMarcup() {\n// // Отримуємо всі ключі з localStorage\n// const keys = Object.keys(localStorage);\n\n// // Фільтруємо ключі за заданим форматом дати\n// const dateRegex = /^\\d{2}\\/\\d{2}\\/\\d{4}$/;\n// const filteredKeys = keys.filter(key => dateRegex.test(key));\n\n// // Створюємо розмітку для кожного ключа та його значення\n// const markup = filteredKeys.map(key => {\n//   const value = JSON.parse(localStorage.getItem(key));\n//   const paragraphs = value.map(item => `<p>${item}</p>`).join('');\n//   return `<h2>${key}</h2>${paragraphs}`;\n// }).join('');\n\n// // Додаємо розмітку в тег body\n// readList.innerHTML = markup;\n// };\n\n// =========================З перевіркою на унікальність=========\nfunction testMarkupWithFilter() {\n  // Отримуємо всі ключі з localStorage\n  const keys = Object.keys(localStorage);\n\n  // Фільтруємо ключі за заданим форматом дати\n  const dateRegex = /^\\d{2}\\/\\d{2}\\/\\d{4}$/;\n  const filteredKeys = keys.filter(key => dateRegex.test(key));\n\n  // Об'єднуємо значення з однаковими датами, зберігаючи тільки унікальні значення\n  const data = {};\n  filteredKeys.forEach(key => {\n    const value = JSON.parse(localStorage.getItem(key));\n    value.forEach(item => {\n      if (data[item]) {\n        const existingDate = Object.keys(data[item])[0];\n        const currentDate = key;\n        if (new Date(currentDate) > new Date(existingDate)) {\n          data[item] = { [currentDate]: true };\n        }\n      } else {\n        data[item] = { [key]: true };\n      }\n    });\n  });\n\n  // Створюємо розмітку для кожного ключа та його значення\n  const markup = Object.keys(data)\n    .map(item => {\n      const dates = Object.keys(data[item]);\n      const paragraphs = `<p>${item}</p>`.repeat(dates.length);\n      return `<h2>${dates[0]}</h2>${paragraphs}`;\n    })\n    .join('');\n\n  // Додаємо розмітку в тег body\n  readList.innerHTML = markup;\n}\n// ==================================================\n\nfunction testMarkupWithEnotherFilter() {\n  // Отримуємо всі ключі з localStorage\n  const keys = Object.keys(localStorage);\n\n  // Фільтруємо ключі за заданим форматом дати\n  const dateRegex = /^\\d{2}\\/\\d{2}\\/\\d{4}$/;\n  const filteredKeys = keys.filter(key => dateRegex.test(key));\n\n  // Створюємо об'єкт, де ключами є унікальні значення з localStorage, а значеннями є масиви ключів, які містять ці значення\n  const uniqueValues = {};\n  filteredKeys.forEach(key => {\n    const value = JSON.parse(localStorage.getItem(key));\n    value.forEach(item => {\n      if (!uniqueValues[item]) {\n        uniqueValues[item] = [];\n      }\n      uniqueValues[item].push(key);\n    });\n  });\n\n  // Створюємо розмітку для кожного ключа та його значення\n  const markup = filteredKeys\n    .map(key => {\n      const value = JSON.parse(localStorage.getItem(key));\n      const paragraphs = value\n        .filter(item => uniqueValues[item].indexOf(key) === 0) // Фільтруємо унікальні значення для кожного ключа\n        .map(item => `<p>${item}</p>`)\n        .join('');\n      return `<h2>${key}</h2>${paragraphs}`;\n    })\n    .join('');\n\n  // Додаємо розмітку в тег body\n  readList.innerHTML = markup;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n"],"names":["parcelRequire","Object","defineProperty","$cec85eba0a352189$exports","value","default","obj","key","enumerable","configurable","writable","$51c7857e68022812$var$readList","document","querySelector","children","length","console","log","innerHTML","$51c7857e68022812$var$isReadEmpty","keys","localStorage","articlesByDate","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","test","articles","JSON","parse","getItem","err","return","markup","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_step1","_iterator1","key1","concat","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","article","title","err1","$51c7857e68022812$var$testMarkup2"],"version":3,"file":"read.7479a894.js.map"}