function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},s=t.parcelRequired7c6;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequired7c6=s),s.register("5XSq5",(function(t,n){e(t.exports,"createMainPage",(function(){return _})),e(t.exports,"createPopularNews",(function(){return g}));var a=s("bkgkh"),i=s("2nhTy"),o=s("8unPu"),c=s("b5rV1");const r=document.getElementById("main-page"),d=document.querySelector(".wraper__weather"),l=document.getElementById("empty"),u=document.getElementById("searchForm");let m="",p=0,v=0,h="",f="";async function g(){d.removeAttribute("hidden");const e=await async function(){try{return await fetch("https://api.nytimes.com/svc/mostpopular/v2/viewed/7.json?api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn",{headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}catch(e){console.error(e)}}();console.log(e.results);const t=e.results.map((e=>{const t=0!==e.media.length?e.media[0]["media-metadata"][2].url:"https://user-images.githubusercontent.com/110947394/222411348-dc3ba506-91e5-4318-9a9e-89fcf1a764a8.jpg",{id:n,title:a,abstract:s,published_date:i,url:o,section:r,uri:d}=e,l=(0,c.isNewsInFavorites)(d);return`<div class="news-card" id="${n}">\n            <img src="${t}" alt="заглушка" />\n            <div class="news-card__info">\n              <div class="news-card__category">${r}</div>\n              <button class="news-card__favorite-btn ${l?"active_btn":""}" data-news-id="${d}">\n                ${l?"Remove from Favorite":"Add to Favorite"}\n              </button>\n              <h2 class="news-card__title">${a}</h2>\n              <p class="news-card__description">${s.length>100?s.substring(0,100)+"...":s}</p>\n              <div class="news-card__date-div">\n              <div class="news-card__date">${new Date(i).toLocaleDateString()}</div>\n              <button class="btn-read-more news-card__read-more">\n              <a href="${o}" target="_blank">Read more</a>\n              </button>\n              </div>\n            </div>\n          </div>`}));r.insertAdjacentHTML("beforeend",t.join("")),document.addEventListener("DOMContentLoaded",a.startWeatherApp)}async function _(e,t){l.setAttribute("hidden",""),r.nextElementSibling.style.visibility="visible";const n=await async function(e,t){f=t?h+`&page=${e}`+`&fq=pub_date:(${t})`:h+`&page=${e}`,console.log(f);try{return await fetch(f,{headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}catch(e){console.error(e)}}(e,t);if(console.dir(n.response),0===n.response.docs.length)return Array.from(r.children).forEach((e=>{e!==l&&e!==d&&e.remove()})),console.log(n.response.docs.length),l.removeAttribute("hidden"),d.setAttribute("hidden",""),u.elements.search.value="",void(r.nextElementSibling.style.visibility="hidden");Array.from(r.children).forEach((e=>{e!==d&&e!==l&&e.remove()})),d.removeAttribute("hidden");const s=n.response.docs.map((e=>{const t=e.headline.main,n=0!==e.multimedia.length?`https://static01.nyt.com/${e.multimedia[0].url}`:"https://user-images.githubusercontent.com/110947394/222411348-dc3ba506-91e5-4318-9a9e-89fcf1a764a8.jpg",{_id:a,section_name:s,abstract:i,pub_date:o,web_url:r}=e,d=(0,c.isNewsInFavorites)(a);return`\n          <div class="news-card" id="${a}">\n            <img src="${n}" alt="заглушка" />\n            <div class="news-card__info">\n              <div class="news-card__category">${s}</div>\n              <button class="news-card__favorite-btn ${d?"active_btn":""}" data-news-id="${a}">\n                ${d?"Remove from Favorite":"Add to Favorite"}\n              </button>\n              <h2 class="news-card__title">${t}</h2>\n              <p class="news-card__description">${i.length>100?i.substring(0,100)+"...":i}</p>\n              <div class="news-card__date-div">\n              <div class="news-card__date">${new Date(o).toLocaleDateString()}</div>\n              <button class="btn-read-more news-card__read-more">\n              <a href="${r}" target="_blank">Read more</a>\n              </button>\n              </div>\n            </div>\n          </div>\n        `}));r.insertAdjacentHTML("beforeend",s.join("")),document.addEventListener("DOMContentLoaded",a.startWeatherApp),p=n.response.meta.hits,console.log(p),0!==p&&(u.elements.search.value="",(0,i.updatePagination)(p))}u.addEventListener("submit",(e=>{e.preventDefault(),v=0,m=e.target.elements.search.value.trim(),console.log(v,m),h=`https://api.nytimes.com/svc/search/v2/articlesearch.json?&api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn&q=${m}`,_(v)})),r.addEventListener("click",(e=>{null!==e.target.closest(".news-card__favorite-btn")&&(0,c.toggleFavoriteNews)(e)})),r.addEventListener("click",o.onReadCard)})),s.register("bkgkh",(function(t,n){e(t.exports,"startWeatherApp",(function(){return s}));const a=document.getElementById("weather");function s(){a.innerHTML='<div class="weather__loading"><img src="https://github.com/AlexMakhony/Final_project_js/blob/main/chost.gif?raw=true" alt="Loading..."></div>',navigator.geolocation.getCurrentPosition((e=>{i(e.coords.latitude,e.coords.longitude)}),(e=>{console.error(e),i()}))}async function i(e,t){let n;n=e&&t?`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${t}&appid=f5984abfd7be02d0f0f71396692dd7ba&units=metric`:"https://api.openweathermap.org/data/2.5/forecast?units=metric&q=Kyiv&appid=f5984abfd7be02d0f0f71396692dd7ba";try{const e=await fetch(n),t=await e.json();e.ok?function(e){const t=e.city.coord.lat,n=e.city.coord.lon;console.log(e);const i="https://openweathermap.org/img/wn/",o=e.list[0],c=Math.round(o.main.temp),r=o.weather[0].description,d=e.city.name,l=`${i}${o.weather[0].icon}@4x.png`,u=(new Date).toLocaleDateString("en-US",{weekday:"short"}),m=(new Date).toLocaleDateString("en-US",{day:"numeric"}).toUpperCase(),p=(new Date).toLocaleDateString("en-US",{month:"short"}),v=(new Date).toLocaleDateString("en-US",{year:"numeric"}).toUpperCase();let h=`<div class="header__weather">\n          <div class="temp__info">${c}°</div>\n          <div class="status__location">\n            <div class="status">\n              <p class="status__name">${r}</p>\n            </div>\n            <div class="location">\n              <img src="https://raw.githubusercontent.com/AlexMakhony/Final_project_js/6cf166ba0d110ff0a2ce6b8f26f2dd802ee28f35/Vector.svg" alt="checkpoint">\n              <p class="location__name">${d}</p>\n              </div>\n            </div>\n          </div>\n          <div class="icon__picture">\n            <img class="weather__picture" src="${l}" alt="Clouds">\n          </div>\n          <div class="date__wrapper">\n            <div class="day">${u}</div>\n            <div class="date">${m} ${p} ${v}</div>\n          </div>\n          <button class="weatherForweek" id="weatherForweek">Weather for 5 days</button>\n          `;a.innerHTML=h;document.getElementById("weatherForweek").addEventListener("click",(()=>async function(e,t){const n=`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${t}&appid=f5984abfd7be02d0f0f71396692dd7ba&units=metric`;try{const e=await fetch(n),t=await e.json();e.ok?function(e){const t=[];let n=new Date(e.list[0].dt_txt).getDate(),i=new Date(e.list[0].dt_txt).toLocaleDateString("en-US",{weekday:"short"}),o=e.list[0].main.temp,c=e.list[0].main.temp,r=e.list[0].weather[0].icon,d=`https://openweathermap.org/img/wn/${r}.png`;for(let a=1;a<e.list.length;a++){const s=new Date(e.list[a].dt_txt),l=s.getDate();if(l!==n){const u=s.toLocaleDateString("en-US",{month:"short"});t.push({dayOfWeek:i,dayOfMonth:n,month:u,tempMin:o,tempMax:c,iconUrl:d}),n=l,i=s.toLocaleDateString("en-US",{weekday:"short"}),o=e.list[a].main.temp,c=e.list[a].main.temp,r=e.list[a].weather[0].icon,d=`https://openweathermap.org/img/wn/${r}.png`}else e.list[a].main.temp<o&&(o=e.list[a].main.temp),e.list[a].main.temp>c&&(c=e.list[a].main.temp)}a.innerHTML="";const l=document.createElement("button");a.appendChild(l).classList.add("backBtn"),l.innerHTML="Back",l.addEventListener("click",(()=>{s()})),t.forEach((e=>{const{dayOfWeek:t,dayOfMonth:n,month:s,tempMin:i,tempMax:o,iconUrl:c}=e,r=`\n        <div class="day__card">\n          <div class="dayOfMonth">${n}</div>\n          <div class="dayOfWeek">${t}</div>\n        </div>\n        <div class="iconUrl">\n            <img class="weather__picture__5days" src="${c}" alt="weather4days">\n          </div>\n        <div class="icon__status">\n          <div class="tempMax">Max temp:${Math.round(o)}°</div>\n          <div class="tempMin">Min temp:${Math.round(i)}°</div>\n        </div>\n      `,d=document.createElement("div");d.innerHTML=r,a.appendChild(d).classList.add("forecast__wrapper")}))}(t):a.innerHTML=t.message}catch(e){console.error(e)}}(t,n)))}(t):a.innerHTML=t.message}catch(e){console.error(e)}}})),s.register("2nhTy",(function(t,n){e(t.exports,"updatePagination",(function(){return d})),e(t.exports,"updatePaginationCategoties",(function(){return f}));var a=s("5XSq5"),i=s("kV9l4");let o=0,c=0,r=10;function d(e){const t=document.querySelector(".pagination");t.innerHTML="",o=Math.ceil(e/r),o>100&&(o=100);const n=document.createElement("button");n.textContent="1",n.classList="dot",0===c&&n.classList.add("dot-active"),n.addEventListener("click",(()=>{c=0,m()})),t.appendChild(n);const a=document.createElement("button");a.textContent="< Prew",a.classList="prev dot",0===c&&(a.disabled=!0),a.addEventListener("click",(()=>{c--,m()})),t.insertBefore(a,t.firstChild);let s=Math.max(1,c),i=Math.min(o-1,c+1);if(window.innerWidth>767&&(s=Math.max(1,c-1),i=Math.min(o-1,c+2)),s>1){const e=document.createElement("button");e.textContent="...",e.disabled=!0,e.classList="dots",t.appendChild(e)}for(let e=s;e<i;e++){const n=document.createElement("button");n.textContent=e+1,n.classList="dot",e===c&&n.classList.add("dot-active"),n.addEventListener("click",(()=>{c=e,m()})),t.appendChild(n)}if(i<o-1){const e=document.createElement("button");e.textContent="...",e.disabled=!0,e.classList="dots",t.appendChild(e)}if(o>1){const e=document.createElement("button");e.textContent=o,e.classList="dot",c===o-1&&e.classList.add("dot-active"),e.addEventListener("click",(()=>{c=o-1,m()})),t.appendChild(e)}const d=document.createElement("button");d.textContent="Next >",d.classList="next dot",c===o-1&&(d.disabled=!0),d.addEventListener("click",(()=>{c++,m()})),t.appendChild(d)}function l(){document.getElementById("loader-container").style.display="none",document.getElementById("pagination").style.display="flex"}function u(){document.getElementById("loader-container").style.display="flex",document.getElementById("pagination").style.display="none"}function m(){u(),setTimeout(l,1e3),(0,a.createMainPage)(c),d()}let p=0,v=0,h=0;function f(e){const t=document.querySelector(".pagination");t.innerHTML="",r=20,p=25;const n=document.createElement("button");n.textContent="1",n.classList="dot",0===v&&n.classList.add("dot-active"),n.addEventListener("click",(()=>{v=0,g(e)})),t.appendChild(n);const a=document.createElement("button");a.textContent="< Prew",a.classList="prev dot",0===v&&(a.disabled=!0),a.addEventListener("click",(()=>{v--,g(e)})),t.insertBefore(a,t.firstChild);let s=Math.max(1,v),i=Math.min(p-1,v+1);if(window.innerWidth>767&&(s=Math.max(1,v-1),i=Math.min(p-1,v+2)),s>1){const e=document.createElement("button");e.textContent="...",e.disabled=!0,e.classList="dots",t.appendChild(e)}for(let n=s;n<i;n++){const a=document.createElement("button");a.textContent=n+1,a.classList="dot",n===v&&a.classList.add("dot-active"),a.addEventListener("click",(()=>{v=n,g(e)})),t.appendChild(a)}if(i<p-1){const e=document.createElement("button");e.textContent="...",e.disabled=!0,e.classList="dots",t.appendChild(e)}if(p>1){const n=document.createElement("button");n.textContent=p,n.classList="dot",v===p-1&&n.classList.add("dot-active"),n.addEventListener("click",(()=>{v=p-1,g(e)})),t.appendChild(n)}const o=document.createElement("button");o.textContent="Next >",o.classList="next dot",v===p-1&&(o.disabled=!0),o.addEventListener("click",(()=>{v++,g(e)})),t.appendChild(o)}function g(e){h=20*v,u(),setTimeout(l,1e3),(0,i.getNewsByCategory)(h,e),f(e)}})),s.register("kV9l4",(function(t,n){e(t.exports,"getCategories",(function(){return l})),e(t.exports,"getNewsByCategory",(function(){return u}));var a=s("2nhTy");const i=document.getElementById("category-btn"),o=document.getElementById("main-page"),c=document.querySelector(".wraper__weather"),r=document.getElementById("empty");let d="";async function l(){try{return await fetch("https://api.nytimes.com/svc/news/v3/content/section-list.json?api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn",{headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=[];for(const n of e.results)t.push(n.display_name);return t})).then((e=>{if(window.innerWidth<768){i.insertAdjacentHTML("beforeend",'<div class="select">\n            <div class="select_header">\n              <div class="select_current">Categories</div>\n            </div>\n            <div class="select_btn">\n            </div>\n        </div>');const t=document.querySelector(".select_btn"),a=document.querySelector(".select_header");a.addEventListener("click",(function(){a.classList.contains("is-active")?(a.classList.remove("is-active"),n.classList.remove("is-active")):(a.classList.add("is-active"),n.classList.add("is-active"))}));for(let n=0;n<e.length;n++)t.insertAdjacentHTML("beforeend",`<div class="select_item" value="${e[n]}">${e[n]}</div>`)}if(window.innerWidth>=768&&window.innerWidth<1280){for(let t=0;t<=3;t++)i.insertAdjacentHTML("beforeend",`<button type="button" class="category_btn">${e[t]}</button>`);i.insertAdjacentHTML("beforeend",'<div class="select">\n            <div class="select_header">\n              <div class="select_current">Others</div>\n            </div>\n            <div class="select_btn">\n            </div>\n        </div>');const t=document.querySelector(".select_btn"),a=document.querySelector(".select_header");a.addEventListener("click",(function(){a.classList.contains("is-active")?(a.classList.remove("is-active"),n.classList.remove("is-active")):(a.classList.add("is-active"),n.classList.add("is-active"))}));for(let n=4;n<e.length;n++)t.insertAdjacentHTML("beforeend",`<div class="select_item" value="${e[n]}">${e[n]}</div>`)}if(window.innerWidth>=1280){for(let t=0;t<=5;t++)i.insertAdjacentHTML("beforeend",`<button type="button" class="category_btn">${e[t]}</button>`);i.insertAdjacentHTML("beforeend",'<div class="select">\n            <div class="select_header">\n              <div class="select_current">Others</div>\n            </div>\n            <div class="select_btn">\n            </div>\n        </div>');const t=document.querySelector(".select_btn"),a=document.querySelector(".select_header");a.addEventListener("click",(function(){a.classList.contains("is-active")?(a.classList.remove("is-active"),n.classList.remove("is-active")):(a.classList.add("is-active"),n.classList.add("is-active"))}));for(let n=6;n<e.length;n++)t.insertAdjacentHTML("beforeend",`<div class="select_item" value="${e[n]}">${e[n]}</div>`)}document.querySelectorAll(".category_btn").forEach((e=>{e.addEventListener("click",(async t=>{t.preventDefault(),d=e.textContent.toLowerCase(),u(0,d)}))}));function t(e){e.preventDefault(),d=e.target.textContent.toLowerCase(),console.log(d),d=d.replace("/","%2F"),d=d.replace("&","%26"),u(0,d);const t=document.querySelector(".select_header");document.querySelector(".select_btn").classList.remove("is-active"),t.classList.remove("is-active")}document.querySelectorAll(".select_item").forEach((e=>{e.addEventListener("click",t)}));const n=document.querySelector(".select_btn")}))}catch(e){console.error(e)}}async function u(e,t){const n=`https://api.nytimes.com/svc/news/v3/content/nyt/${t}.json?offset=${e}&api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn`;try{const e=await fetch(n,{headers:{"Content-Type":"application/json"}}),t=(await e.json()).results;console.log(t),function(e){r.setAttribute("hidden",""),0===e.length?(Array.from(o.children).forEach((e=>{e!==r&&e!==c&&e.remove()})),r.removeAttribute("hidden"),c.setAttribute("hidden","")):(Array.from(o.children).forEach((e=>{e!==c&&e!==r&&e.remove()})),c.removeAttribute("hidden"));const t=e.map((e=>{const t=null!==e.multimedia?e.multimedia[2].url:"https://user-images.githubusercontent.com/110947394/222411348-dc3ba506-91e5-4318-9a9e-89fcf1a764a8.jpg",{section:n,abstract:a,title:s,url:i,uri:o,published_date:c}=e,r=null!==localStorage.getItem(`favorite_${o}`);return`<div class ="news-card">\n        <img src="${t}" alt="photo"/>\n        <div class="news-card__info">\n        <div class="news-card__category">${n}</div>\n        <button class="news-card__favorite-btn ${r?"active_btn":""}" data-news-id="${o}">\n                ${r?"Remove from Favorite":"Add to Favorite"}\n              </button>\n              <h2 class="news-card__title">${s}</h2>\n              <p class="news-card__description">${a.length>100?a.substring(0,100)+"...":a}</p>\n              <div class="news-card__date-div">\n              <div class="news-card__date">${new Date(c).toLocaleDateString()}</div>\n              <a class="news-card__read-more" href="${i}" target="_blank">Read more</a>\n            </div>\n          </div>\n          </div>`})).join("");o.insertAdjacentHTML("beforeend",t),(0,a.updatePaginationCategoties)(d)}(t)}catch(e){console.error(e)}}})),s.register("8unPu",(function(t,n){e(t.exports,"onReadCard",(function(){return s}));const a=[];function s(e){let t=null;const n=(new Date).toLocaleDateString("en-GB");if(e.target.closest(".news-card__read-more")){t=e.target.closest(".news-card"),t&&(t.classList.add("reading_card"),t.insertAdjacentHTML("afterbegin",'<p class="text-alredy-read">Already read <svg class="svg-checkmark" width="18" height="18"><use href="./src/svg/checkmark.svg#icon-checkmark"></use></svg></p>'));const s=t.querySelector(".news-card__category"),i=t.querySelector(".news-card__title"),o=t.querySelector(".news-card__description"),c=t.querySelector(".news-card__favorite-btn"),r=t.querySelector("img"),d=t.querySelector("a"),l={dateRead:`${n}`,id:`${t.id}`,img:`${r.src}`,category:`${s.textContent}`,title:`${i.textContent}`,description:`${o.textContent}`,dataNewsId:`${c.textContent}`,readMore:`${d.href}`};a.push(l),localStorage.setItem(`${n}`,JSON.stringify(a))}}})),s.register("b5rV1",(function(t,n){e(t.exports,"toggleFavoriteNews",(function(){return i})),e(t.exports,"loadFromStorage",(function(){return c})),e(t.exports,"isNewsInFavorites",(function(){return r}));const a="https://api.nytimes.com/svc/search/v2/articlesearch.json",s="favorites";function i(e){const t=e.target,n=t.dataset.newsId;t.textContent.includes("Add")?(t.textContent="Remove from Favorite",t.classList.add("active_btn"),async function(e){if(e.includes("video")||e.includes("slideshow"))return console.log("wrong news");const t=(await async function(e){try{return await fetch(`${a}?fq=_id:("${e}")&api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn`).then((e=>e.json()))}catch(e){console.error(e)}}(e)).response.docs[0],{_id:n,section_name:i,abstract:r,pub_date:d,web_url:l}=t,u=t.headline.main,m=0===t.multimedia.length?"https://user-images.githubusercontent.com/110947394/222411348-dc3ba506-91e5-4318-9a9e-89fcf1a764a8.jpg":`https://static01.nyt.com/${t.multimedia[0].url}`,p={_id:n,section_name:i,abstract:r,pub_date:d,web_url:l,photoUrl:m,title:u},v=c(s);void 0===v?o(s,[p]):(v.push(p),o(s,v))}(n)):(console.log("delete from fav"),t.textContent="Add to Favorite",t.classList.remove("active_btn"),function(e){const t=c(s),n=t.findIndex((t=>t._id===e));t.splice(n,1),o(s,t)}(n))}function o(e,t){try{const n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error(e)}}function c(e){try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error(e)}}function r(e){const t=c(s);let n=!1;return void 0!==t&&(n=t.some((t=>t._id===e))),console.log("isFavorit=",n),n}}));var i=s("5XSq5"),o=s("bkgkh");(0,s("kV9l4").getCategories)(),(0,i.createPopularNews)(),(0,o.startWeatherApp)();
//# sourceMappingURL=favorite.81a28f2e.js.map
