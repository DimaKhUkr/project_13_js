document.getElementById("search-form");const e=document.getElementById("weather");async function t(t,n){let a;e.innerHTML='\n    <div class="weather__loading">\n      <img src="./" alt="Loading...">\n    </div>\n  ',a=t&&n?`https://api.openweathermap.org/data/2.5/weather?units=metric&lat=${t}&lon=${n}&appid=f5984abfd7be02d0f0f71396692dd7ba`:"https://api.openweathermap.org/data/2.5/weather?units=metric&q=Kyiv&appid=f5984abfd7be02d0f0f71396692dd7ba";const s=await fetch(a,{method:"GET"}),o=await s.json();s.ok?function(t){console.log(t);const n=t.name,a=Math.round(t.main.temp),s=t.weather[0].main,o=t.weather[0].icon,c=(new Date).toLocaleDateString("en-US",{weekday:"short"}),r=(new Date).toLocaleDateString("en-US",{day:"numeric"}).toUpperCase(),i=(new Date).toLocaleDateString("en-US",{month:"short"}),d=(new Date).toLocaleDateString("en-US",{year:"numeric"}).toUpperCase();let l=`<div class="header__weather">\n    <div class="temp__info">${a}°</div>\n    <div class="status__location">\n      <div class="status">\n        <p class="status__name">${s}</p>\n      </div>\n      <div class="location">\n        <img src="./svg/vector.svg" alt="checkpoint">\n        <p class="location__name">${n}</p>\n      </div>\n    </div>\n  </div>\n  <div class="icon__picture">\n    <img class="weather__picture" src="https://openweathermap.org/img/w/${o}.png" alt="Clouds">\n  </div>\n  <div class="date__wrapper">\n    <div class="day">${c}</div>\n    <div class="date">${r} ${i} ${d}</div>\n  </div>\n  <button class="weatherForweek" id="weatherForweek">Weather for 5 days</button>\n  `;e.innerHTML=l}(o):e.innerHTML=o.message}function n(){navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{t(e.coords.latitude,e.coords.longitude)}),(()=>{t()})):t()}e&&n();const a=document.getElementById("main-page");a.addEventListener("click",(e=>{null!==e.target.closest(".news-card__favorite-btn")&&function(e){const t=e.target,n=t.dataset.newsId;null!==localStorage.getItem(`favorite_${n}`)?(localStorage.removeItem(`favorite_${n}`),t.textContent="Add to Favorite",t.classList.remove("active")):(localStorage.setItem(`favorite_${n}`,!0),t.textContent="Remove from Favorite",t.classList.add("active"))}(e)})),(()=>{const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),n=document.querySelector(".js-close-menu"),a=()=>{const n="true"===t.getAttribute("aria-expanded")||!1;t.setAttribute("aria-expanded",!n),e.classList.toggle("is-open");bodyScrollLock[n?"enableBodyScroll":"disableBodyScroll"](document.body)};t.addEventListener("click",a),n.addEventListener("click",a),window.matchMedia("(min-width: 768px)").addEventListener("change",(n=>{n.matches&&(e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1),bodyScrollLock.enableBodyScroll(document.body))}))})();const s=document.getElementById("category-btn");const o=document.getElementById("searchForm");!async function(){try{await fetch("https://api.nytimes.com/svc/news/v3/content/section-list.json?api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn",{headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=[];for(const n of e.results)t.push(n.display_name);return t})).then((e=>{for(let t=0;t<=5;t++)s.insertAdjacentHTML("beforeend",`<button type="button" class="category_btn">${e[t]}</button>`);s.insertAdjacentHTML("beforeend",'<select name="Others" class="category_btn select_btn">\n            <option value="Others" hidden>Others</option>\n            </select>');const t=document.querySelector(".select_btn");for(let n=6;n<e.length;n++)t.insertAdjacentHTML("beforeend",`<option value="${e[n]}">${e[n]}</option>`)}))}catch(e){console.error(e)}}(),async function(){const e=await async function(){try{return await fetch("https://api.nytimes.com/svc/mostpopular/v2/viewed/7.json?api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn",{headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}catch(e){console.error(e)}}();console.log(e.results);const t=e.results.map((e=>{const t=0!==e.media.length?e.media[0]["media-metadata"][2].url:"https://via.placeholder.com/400",{title:n,abstract:a,published_date:s,url:o,section:c,id:r}=e,i=null!==localStorage.getItem(`favorite_${r}`);return`<div class="news-card">\n            <img src="${t}" alt="заглушка" />\n            <div class="news-card__info">\n              <div class="news-card__category">${c}</div>\n              <button class="news-card__favorite-btn ${i?"active":""}" data-news-id="${r}">\n                ${i?"Remove from Favorite":"Add to Favorite"}\n              </button>\n              <h2 class="news-card__title">${n}</h2>\n              <p class="news-card__description">${a.length>100?a.substring(0,100)+"...":a}</p>\n              <div class="news-card__date-div">\n              <div class="news-card__date">${new Date(s).toLocaleDateString()}</div>\n              <a class="news-card__read-more" href="${o}" target="_blank">Read more</a>\n              </div>\n            </div>\n          </div>`}));a.insertAdjacentHTML("beforeend",t.join("")),document.addEventListener("DOMContentLoaded",n)}(),o.addEventListener("submit",(async function(e){e.preventDefault();const t=e.target.elements.search.value.trim();console.log(t);const s=await async function(e,t){const n=`https://api.nytimes.com/svc/search/v2/articlesearch.json?page=${e}&q=${t}&api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn`;try{return await fetch(n,{headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}catch(e){console.error(e)}}(3,t);console.dir(s.response),0===s.response.docs.length&&(console.log(s.response.docs.length),a.innerHTML='<div class="news-card">\n            <img src="" alt="заглушка" />\n            </div>');const o=s.response.docs.map((e=>{const t=e.headline.main,{_id:n,section_name:a,abstract:s,pub_date:o,web_url:c}=e,r=null!==localStorage.getItem(`favorite_${n}`);return`\n          <div class="news-card">\n            <img src="" alt="заглушка" />\n            <div class="news-card__info">\n              <div class="news-card__category">${a}</div>\n              <button class="news-card__favorite-btn ${r?"active":""}" data-news-id="${n}">\n                ${r?"Remove from Favorite":"Add to Favorite"}\n              </button>\n              <h2 class="news-card__title">${t}</h2>\n              <p class="news-card__description">${s.length>100?s.substring(0,100)+"...":s}</p>\n              <div class="news-card__date-div">\n              <div class="news-card__date">${new Date(o).toLocaleDateString()}</div>\n              <a class="news-card__read-more" href="${c}" target="_blank">Read more</a>\n              </div>\n            </div>\n          </div>\n        `}));a.insertAdjacentHTML("beforeend",o.join("")),document.addEventListener("DOMContentLoaded",n),e.target.reset()}));
//# sourceMappingURL=favorite.a5f43cde.js.map
