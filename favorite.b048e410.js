const e=document.getElementById("main-page");e.addEventListener("click",(e=>{null!==e.target.closest(".news-card__favorite-btn")&&function(e){const t=e.target,n=t.dataset.newsId;null!==localStorage.getItem(`favorite_${n}`)?(localStorage.removeItem(`favorite_${n}`),t.textContent="Add to Favorite",t.classList.remove("active")):(localStorage.setItem(`favorite_${n}`,!0),t.textContent="Remove from Favorite",t.classList.add("active"))}(e)})),(()=>{const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),n=document.querySelector(".js-close-menu"),a=()=>{const n="true"===t.getAttribute("aria-expanded")||!1;t.setAttribute("aria-expanded",!n),e.classList.toggle("is-open");bodyScrollLock[n?"enableBodyScroll":"disableBodyScroll"](document.body)};t.addEventListener("click",a),n.addEventListener("click",a),window.matchMedia("(min-width: 768px)").addEventListener("change",(n=>{n.matches&&(e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1),bodyScrollLock.enableBodyScroll(document.body))}))})();document.getElementById("search-form");const t=document.getElementById("weather");async function n(e,n){let a;t.innerHTML='\n    <div class="weather__loading">\n      <img src="./" alt="Loading...">\n    </div>\n  ',a=e&&n?`https://api.openweathermap.org/data/2.5/weather?units=metric&lat=${e}&lon=${n}&appid=f5984abfd7be02d0f0f71396692dd7ba`:"https://api.openweathermap.org/data/2.5/weather?units=metric&q=Kyiv&appid=f5984abfd7be02d0f0f71396692dd7ba";const o=await fetch(a,{method:"GET"}),s=await o.json();o.ok?function(e){console.log(e);const n=e.name,a=Math.round(e.main.temp),o=e.weather[0].main,s=e.weather[0].icon,c=(new Date).toLocaleDateString("en-US",{weekday:"short"}),i=(new Date).toLocaleDateString("en-US",{day:"numeric"}).toUpperCase(),r=(new Date).toLocaleDateString("en-US",{month:"short"}),d=(new Date).toLocaleDateString("en-US",{year:"numeric"}).toUpperCase();let l=`<div class="header__weather">\n    <div class="temp__info">${a}°</div>\n    <div class="status__location">\n      <div class="status">\n        <p class="status__name">${o}</p>\n      </div>\n      <div class="location">\n        <img src="./svg/vector.svg" alt="checkpoint">\n        <p class="location__name">${n}</p>\n      </div>\n    </div>\n  </div>\n  <div class="icon__picture">\n    <img class="weather__picture" src="https://openweathermap.org/img/w/${s}.png" alt="Clouds">\n  </div>\n  <div class="date__wrapper">\n    <div class="day">${c}</div>\n    <div class="date">${i} ${r} ${d}</div>\n  </div>\n  <button class="weatherForweek" id="weatherForweek">Weather for 5 days</button>\n  `;t.innerHTML=l}(s):t.innerHTML=s.message}t&&(navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{n(e.coords.latitude,e.coords.longitude)}),(()=>{n()})):n());const a=document.getElementById("category-btn");const o=document.getElementById("searchForm");!async function(){try{await fetch("https://api.nytimes.com/svc/news/v3/content/section-list.json?api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn",{headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=[];for(const n of e.results)t.push(n.display_name);return console.log(t),t})).then((e=>{for(let t=0;t<=5;t++)a.insertAdjacentHTML("beforeend",`<button type="button" class="category_btn">${e[t]}</button>`);a.insertAdjacentHTML("beforeend",'<select name="Others" class="category_btn select_btn">\n            <option value="Others" hidden>Others</option>\n            </select>');const t=document.querySelector(".select_btn");for(let n=6;n<e.length;n++)t.insertAdjacentHTML("beforeend",`<option value="${e[n]}">${e[n]}</option>`)}))}catch(e){console.error(e)}}(),o.addEventListener("submit",(async function(t){t.preventDefault();const n=t.target.elements.search.value.trim();console.log(n),e.replaceChildren();const a=await async function(e,t){const n=`https://api.nytimes.com/svc/search/v2/articlesearch.json?page=${e}&q=${t}&api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn`;try{return await fetch(n,{headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}catch(e){console.error(e)}}(3,n);console.dir(a.response),0===a.response.docs.length&&(console.log(a.response.docs.length),e.innerHTML='<div class="news-card">\n            <img src="https://via.placeholder.com/400" alt="заглушка" />\n            </div>');const o=a.response.docs.map((e=>{const t=e.headline.main,{_id:n,section_name:a,abstract:o,pub_date:s,web_url:c}=e,i=null!==localStorage.getItem(`favorite_${n}`);return`\n          <div class="news-card">\n            <img src="https://via.placeholder.com/400" alt="заглушка" />\n            <div class="news-card__info">\n              <div class="news-card__category">${a}</div>\n              <button class="news-card__favorite-btn ${i?"active":""}" data-news-id="${n}">\n                ${i?"Remove from Favorite":"Add to Favorite"}\n              </button>\n              <h2 class="news-card__title">${t}</h2>\n              <p class="news-card__description">${o.length>100?o.substring(0,100)+"...":o}</p>\n              <div class="news-card__date-div">\n              <div class="news-card__date">${new Date(s).toLocaleDateString()}</div>\n              <a class="news-card__read-more" href="${c}" target="_blank">Read more</a>\n              </div>\n            </div>\n          </div>\n        `}));e.innerHTML=o.join("");const s=document.createElement("div");s.classList.add("weather-card"),s.innerHTML='<div class="news-card">\n  <img src="https://via.placeholder.com/400" alt="Погода" /></div>';let c=0;console.log(window.innerWidth),window.innerWidth>800&&window.innerWidth<1206?c=1:window.innerWidth>1206&&(c=2),console.log(c);const i=e.children[`${c}`];e.insertBefore(s,i),t.target.reset()}));
//# sourceMappingURL=favorite.b048e410.js.map
