{"mappings":"AAAA,MAGMA,EAAkBC,SAASC,eAAe,qBAmBhDC,eAAeC,IACb,IAAIC,EAAS,GACbL,EAAgBM,UAAY,GAE5B,IAAK,IAAIC,EAAI,EAAGA,EAAIC,aAAaC,OAAQF,IAAK,CAC5C,IAAIG,EAAaF,aAAaG,IAAIJ,GAElC,GAAIG,EAAWE,SAAS,YAAa,CACnC,IAAIC,EAAgBH,EAAWI,MAAM,EAAGJ,EAAWD,QAGnDJ,GAAkBU,SAFCC,EAAgBH,IACjBI,SAASC,KACe,G,EAG9ClB,EAAgBmB,mBAAmB,YAAad,E,CAGlD,SAASU,EAAmBK,GAC1B,MAAMC,EAAQD,EAAKE,SAASC,KAGtBC,EACgB,IAApBJ,EAAKK,WACD,4BAA4BL,EAAKK,WAAW,GAAGC,MAC/C,mCAEAC,IAAEA,EAAGC,aAAEA,EAAYC,SAAEA,EAAQC,SAAEA,EAAQC,QAAEA,GAAYX,EAE3D,MAAO,8DAEeI,mHAEyBI,uFAGhBD,kHAGYN,2DAE7BQ,EAASpB,OAAS,IACdoB,EAASG,UAAU,EAAG,KAAO,MAC7BH,sGAGyB,IAAII,KACjCH,GACAI,mFACsCH,wG,CAOtD5B,eAAea,EAAgBmB,GAC7B,IACE,aAAaC,MACX,qEAA0BD,gDACzBE,MAAKC,GAAQA,EAAKC,Q,CACrB,MAAOC,GACPC,QAAQD,MAAMA,E,EA9ElBpC,IAEAJ,EAAgB0C,iBAAiB,SAASC,IAEzB,OADAA,EAAMC,OAAOC,QAAQ,6BAMtC,SAA4BF,GAC1B,MACMG,EADSH,EAAMC,OACCG,QAAQD,OAE9BtC,aAAawC,WAAW,YAAYF,KACpC1C,G,CATE6C,CAAmBN,EAAM","sources":["src/js/favorites.js"],"sourcesContent":["const API_KEY = 'u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn';\nconst URL_SEARCH = 'https://api.nytimes.com/svc/search/v2/articlesearch.json';\n\nconst placeForFavNews = document.getElementById('favorite-articles');\n\ncreateFavoritePage();\n\nplaceForFavNews.addEventListener('click', event => {\n  const button = event.target.closest('.news-card__favorite-btn');\n  if (button !== null) {\n    removeFromFavorite(event);\n  }\n});\n\nfunction removeFromFavorite(event) {\n  const button = event.target;\n  const newsId = button.dataset.newsId;\n\n  localStorage.removeItem(`favorite_${newsId}`);\n  createFavoritePage();\n}\n\nasync function createFavoritePage() {\n  let markup = '';\n  placeForFavNews.innerHTML = \"\";\n\n  for (let i = 0; i < localStorage.length; i++) {\n    let storageKey = localStorage.key(i);\n\n    if (storageKey.includes('favorite')) {\n      let favoriteQuery = storageKey.slice(9, storageKey.length);\n      const data = await getFavoriteNews(favoriteQuery);\n      const news = data.response.docs;\n      markup = markup + createFavoriteNews(news[0]);\n    }\n  }\n  placeForFavNews.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction createFavoriteNews(news) {\n  const title = news.headline.main;\n  const isFavorite = true;\n\n  const photoUrl =\n    news.multimedia !== 0\n      ? `https://static01.nyt.com/${news.multimedia[0].url}`\n      : 'https://via.placeholder.com/400';\n\n  const { _id, section_name, abstract, pub_date, web_url } = news;\n\n  return `\n          <div class=\"news-card\">\n            <img src=\"${photoUrl}\" alt=\"заглушка\" />\n            <div class=\"news-card__info\">\n              <div class=\"news-card__category\">${section_name}</div>\n              <button class=\"news-card__favorite-btn ${\n                isFavorite ? 'active' : ''\n              }\" data-news-id=\"${_id}\">\n                ${isFavorite ? 'Remove from Favorite' : 'Add to Favorite'}\n              </button>\n              <h2 class=\"news-card__title\">${title}</h2>\n              <p class=\"news-card__description\">${\n                abstract.length > 100\n                  ? abstract.substring(0, 100) + '...'\n                  : abstract\n              }</p>\n              <div class=\"news-card__date-div\">\n              <div class=\"news-card__date\">${new Date(\n                pub_date\n              ).toLocaleDateString()}</div>\n              <a class=\"news-card__read-more\" href=\"${web_url}\" target=\"_blank\">Read more</a>\n              </div>\n            </div>\n          </div>\n        `;\n}\n\nasync function getFavoriteNews(query) {\n  try {\n    return await fetch(\n      `${URL_SEARCH}?fq=_id:(\"${query}\")&api-key=${API_KEY}`)\n      .then(resp => resp.json());\n  } catch (error) {\n    console.error(error);\n  }\n}\n"],"names":["$7f07f86ee49d81c7$var$placeForFavNews","document","getElementById","async","$7f07f86ee49d81c7$var$createFavoritePage","markup","innerHTML","i","localStorage","length","storageKey","key","includes","favoriteQuery","slice","$7f07f86ee49d81c7$var$createFavoriteNews","$7f07f86ee49d81c7$var$getFavoriteNews","response","docs","insertAdjacentHTML","news","title","headline","main","photoUrl","multimedia","url","_id","section_name","abstract","pub_date","web_url","substring","Date","toLocaleDateString","query","fetch","then","resp","json","error","console","addEventListener","event","target","closest","newsId","dataset","removeItem","$7f07f86ee49d81c7$var$removeFromFavorite"],"version":3,"file":"favorite.dd7fbebb.js.map"}