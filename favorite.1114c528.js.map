{"mappings":"AAAA,MAEMA,EAAWC,SAASC,eAAe,aAqFzCF,EAASG,iBAAiB,SAASC,IAElB,OADAA,EAAMC,OAAOC,QAAQ,6BAhBtC,SAAwBF,GACtB,MAAMG,EAASH,EAAMC,OACfG,EAASD,EAAOE,QAAQD,OAEqB,OAA/CE,aAAaC,QAAQ,YAAYH,MACnCE,aAAaE,WAAW,YAAYJ,KACpCD,EAAOM,YAAc,kBACrBN,EAAOO,UAAUC,OAAO,YAExBL,aAAaM,QAAQ,YAAYR,KAAU,GAC3CD,EAAOM,YAAc,uBACrBN,EAAOO,UAAUG,IAAI,U,CAOrBC,CAAed,EAAM,IC1FxB,MACE,MAAMe,EAAalB,SAASmB,cAAc,sBACpCC,EAAcpB,SAASmB,cAAc,iBACrCE,EAAerB,SAASmB,cAAc,kBAEtCG,EAAa,KACjB,MAAMC,EAC0C,SAA9CH,EAAYI,aAAa,mBAA+B,EAC1DJ,EAAYK,aAAa,iBAAkBF,GAC3CL,EAAWL,UAAUa,OAAO,WAK5BC,eAH0BJ,EAEtB,mBADA,qBAE6BvB,SAAS4B,KAAK,EAGjDR,EAAYlB,iBAAiB,QAASoB,GACtCD,EAAanB,iBAAiB,QAASoB,GAGvCO,OAAOC,WAAW,sBAAsB5B,iBAAiB,UAAU6B,IAC5DA,EAAEC,UACPd,EAAWL,UAAUC,OAAO,WAC5BM,EAAYK,aAAa,iBAAiB,GAC1CE,eAAeM,iBAAiBjC,SAAS4B,MAAK,GAEjD,EA3BD,GCAD,MAGMM,EAAclC,SAASC,eAAe,gBCG5C,MAAMkC,EAAcnC,SAASC,eAAe,eDDrCmC,iBACL,UACeC,MAAM,yGAA6B,CAC9CC,QAAS,CACP,eAAgB,sBAGjBC,MAAKC,GAAQA,EAAKC,SAElBF,MAAKG,IACJ,MAAMC,EAAoB,GAC1B,IAAK,MAAMC,KAAOF,EAAIG,QACpBF,EAAkBG,KAAKF,EAAIG,cAG7B,OADAC,QAAQC,IAAIN,GACLA,CAAiB,IAEzBJ,MAAKI,IAEJ,IAAK,IAAIO,EAAI,EAAGA,GAAK,EAAGA,IACtBhB,EAAYiB,mBACV,YACA,8CAA8CR,EAAkBO,eAGpEhB,EAAYiB,mBACV,YACA,4IAIF,MAAMC,EAAYpD,SAASmB,cAAc,eACzC,IAAK,IAAIkC,EAAI,EAAGA,EAAIV,EAAkBW,OAAQD,IAC5CD,EAAUD,mBACR,YACA,kBAAkBR,EAAkBU,OAAOV,EAAkBU,cAC9D,G,CAGP,MAAOE,GACPP,QAAQO,MAAMA,E,ECrClB,GAEApB,EAAYjC,iBAAiB,UHUtBkC,eAA8BL,GACnCA,EAAEyB,iBACF,MAAMC,EAAQ1B,EAAE3B,OAAOsD,SAASC,OAAOC,MACvCZ,QAAQC,IAAIQ,GACZ,MAAMI,EAAW,kCACjB9D,EAAS+D,kBACT,MAAMC,QAtBD3B,eAA6BqB,GAGlC,MAAMO,EAAM,8DAA8DP,6CAC1E,IACE,aAAapB,MAAM2B,EAAK,CACtB1B,QAAS,CACP,eAAgB,sBAEjBC,MAAKC,GAAQA,EAAKC,Q,CAErB,MAAOc,GACPP,QAAQO,MAAMA,E,EAUOU,CAAcR,GACrCT,QAAQkB,IAAIH,EAASA,SAASI,MACQ,IAAlCJ,EAASA,SAASI,KAAKb,SACzBN,QAAQC,IAAIc,EAASA,SAASI,KAAKb,QACnCvD,EAASqE,UAAY,kDACDP,4CAGtB,MAAMQ,EAAYN,EAASA,SAASI,KAAKG,KAAIC,IAC3C,MAAMC,EAAQD,EAAKE,SAASC,MACtBC,IAAEA,EAAGC,aAAEA,EAAYC,SAAEA,EAAQC,SAAEA,EAAQC,QAAEA,GAAYR,EACrDS,EAAyD,OAA5CvE,aAAaC,QAAQ,YAAYiE,KACpD,MAAO,8DAEad,mHAEyBe,iEAEjCI,EAAa,SAAW,qBACPL,wBACfK,EAAa,uBAAyB,0FAEXR,2DAE7BK,EAASvB,OAAS,IACduB,EAASI,UAAU,EAAG,KAAO,MAC7BJ,qDAEyB,IAAIK,KACjCJ,GACAK,mFACsCJ,kFAG7C,IAEPhF,EAASqE,UAAYC,EAAUe,KAAK,G","sources":["src/js/sendrequest.js","src/js/mobileMenu.js","src/js/categories.js","src/index.js"],"sourcesContent":["const API_KEY = 'u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn';\n\nconst mainPage = document.getElementById('main-page');\n\nexport async function articleSearch(query) {\n  //   e.preventDefault();\n  //   const query = e.value;\n  const url = `https://api.nytimes.com/svc/search/v2/articlesearch.json?q=${query}&api-key=${API_KEY}`;\n  try {\n    return await fetch(url, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    }).then(resp => resp.json());\n    //   .then(res => console.log(res));\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nexport async function createMainPage(e) {\n  e.preventDefault();\n  const query = e.target.elements.search.value;\n  console.log(query);\n  const photoUrl = 'https://via.placeholder.com/400';\n  mainPage.replaceChildren();\n  const response = await articleSearch(query);\n  console.dir(response.response.docs);\n  if (response.response.docs.length === 0) {\n    console.log(response.response.docs.length);\n    mainPage.innerHTML = `<div class=\"news-card\">\n            <img src=\"${photoUrl}\" alt=\"заглушка\" />\n            </div>`;\n  }\n  const newsCards = response.response.docs.map(news => {\n    const title = news.headline.main;\n    const { _id, section_name, abstract, pub_date, web_url } = news;\n    const isFavorite = localStorage.getItem(`favorite_${_id}`) !== null;\n    return `\n          <div class=\"news-card\">\n            <img src=\"${photoUrl}\" alt=\"заглушка\" />\n            <div class=\"news-card__info\">\n              <div class=\"news-card__category\">${section_name}</div>\n              <button class=\"news-card__favorite-btn ${\n                isFavorite ? 'active' : ''\n              }\" data-news-id=\"${_id}\">\n                ${isFavorite ? 'Remove from Favorite' : 'Add to Favorite'}\n              </button>\n              <h2 class=\"news-card__title\">${title}</h2>\n              <p class=\"news-card__description\">${\n                abstract.length > 100\n                  ? abstract.substring(0, 100) + '...'\n                  : abstract\n              }</p>\n              <div class=\"news-card__date\">${new Date(\n                pub_date\n              ).toLocaleDateString()}</div>\n              <a class=\"news-card__read-more\" href=\"${web_url}\" target=\"_blank\">Read more</a>\n            </div>\n          </div>\n        `;\n  });\n  mainPage.innerHTML = newsCards.join('');\n}\n\n// docs.headline.main - название статьи\n// docs.lead_paragraph - начало статьи\n// docs.pub_date - дата статьи\n// docs.web_url - ссылка на статью\n// docs.section_name - категория\n\n// Добавление/удаление новости из избранного\nfunction toggleFavorite(event) {\n  const button = event.target;\n  const newsId = button.dataset.newsId;\n\n  if (localStorage.getItem(`favorite_${newsId}`) !== null) {\n    localStorage.removeItem(`favorite_${newsId}`);\n    button.textContent = 'Add to Favorite';\n    button.classList.remove('active');\n  } else {\n    localStorage.setItem(`favorite_${newsId}`, true);\n    button.textContent = 'Remove from Favorite';\n    button.classList.add('active');\n  }\n}\n\nmainPage.addEventListener('click', event => {\n  const button = event.target.closest('.news-card__favorite-btn');\n  if (button !== null) {\n    toggleFavorite(event);\n  }\n});\n","(() => {\n   const mobileMenu = document.querySelector('.js-menu-container');\n   const openMenuBtn = document.querySelector('.js-open-menu');\n   const closeMenuBtn = document.querySelector('.js-close-menu');\n \n   const toggleMenu = () => {\n     const isMenuOpen =\n       openMenuBtn.getAttribute('aria-expanded') === 'true' || false;\n     openMenuBtn.setAttribute('aria-expanded', !isMenuOpen);\n     mobileMenu.classList.toggle('is-open');\n \n     const scrollLockMethod = !isMenuOpen\n       ? 'disableBodyScroll'\n       : 'enableBodyScroll';\n     bodyScrollLock[scrollLockMethod](document.body);\n   };\n \n   openMenuBtn.addEventListener('click', toggleMenu);\n   closeMenuBtn.addEventListener('click', toggleMenu);\n \n   // Close the mobile menu on wider screens if the device orientation changes\n   window.matchMedia('(min-width: 768px)').addEventListener('change', e => {\n     if (!e.matches) return;\n     mobileMenu.classList.remove('is-open');\n     openMenuBtn.setAttribute('aria-expanded', false);\n     bodyScrollLock.enableBodyScroll(document.body);\n   });\n })();\n\n\n","const API_KEY = `u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn`;\nconst URL = `https://api.nytimes.com/svc/news/v3/content/section-list.json`;\n\nconst categoryBtn = document.getElementById('category-btn');\n\nexport async function getCategories() {\n  try {\n    return await fetch(`${URL}?api-key=${API_KEY}`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then(resp => resp.json())\n      //   .then(cat => console.log(cat.results));\n      .then(cat => {\n        const arrayOfCategories = [];\n        for (const arr of cat.results) {\n          arrayOfCategories.push(arr.display_name);\n        }\n        console.log(arrayOfCategories);\n        return arrayOfCategories;\n      })\n      .then(arrayOfCategories => {\n        // for (const arrbtn of arrayOfCategories) {\n        for (let i = 0; i <= 5; i++) {\n          categoryBtn.insertAdjacentHTML(\n            'beforeend',\n            `<button type=\"button\" class=\"category_btn\">${arrayOfCategories[i]}</button>`\n          );\n        }\n        categoryBtn.insertAdjacentHTML(\n          'beforeend',\n          `<select name=\"Others\" class=\"category_btn select_btn\">\n            <option value=\"Others\" hidden>Others</option>\n            </select>`\n        );\n        const selectBtn = document.querySelector('.select_btn');\n        for (let i = 6; i < arrayOfCategories.length; i++) {\n          selectBtn.insertAdjacentHTML(\n            'beforeend',\n            `<option value=\"${arrayOfCategories[i]}\">${arrayOfCategories[i]}</option>`\n          );\n        }\n      });\n  } catch (error) {\n    console.error(error);\n  }\n}\n","import { createMainPage } from './js/sendrequest';\n\nimport { mobileMenu } from './js/mobileMenu';\n\nimport { getCategories } from './js/categories';\n\nconst inputSearch = document.getElementById('searchForm');\n\ngetCategories();\n\ninputSearch.addEventListener('submit', createMainPage);\n"],"names":["$457cad0f7cadee7f$var$mainPage","document","getElementById","addEventListener","event","target","closest","button","newsId","dataset","localStorage","getItem","removeItem","textContent","classList","remove","setItem","add","$457cad0f7cadee7f$var$toggleFavorite","mobileMenu","querySelector","openMenuBtn","closeMenuBtn","toggleMenu","isMenuOpen","getAttribute","setAttribute","toggle","bodyScrollLock","body","window","matchMedia","e","matches","enableBodyScroll","$f3b06000f9b46fbb$var$categoryBtn","$1f0dc3b9307be026$var$inputSearch","async","fetch","headers","then","resp","json","cat","arrayOfCategories","arr","results","push","display_name","console","log","i","insertAdjacentHTML","selectBtn","i1","length","error","preventDefault","query","elements","search","value","photoUrl","replaceChildren","response","url","$457cad0f7cadee7f$export$de0b15fd56f34d10","dir","docs","innerHTML","newsCards","map","news","title","headline","main","_id","section_name","abstract","pub_date","web_url","isFavorite","substring","Date","toLocaleDateString","join"],"version":3,"file":"favorite.1114c528.js.map"}