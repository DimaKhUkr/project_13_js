!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a);var o=a("bpxeT"),c=a("2TvXO"),s="u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn",i="https://api.nytimes.com/svc/search/v2/articlesearch.json",d="favorites";function l(e){var t=e.target,n=t.dataset.newsId;t.textContent.includes("Add")?(t.textContent="Remove from Favorite",t.classList.add("active_btn"),function(e){u.apply(this,arguments)}(n)):(console.log("delete from fav"),t.textContent="Add to Favorite",t.classList.remove("active_btn"),function(e){var t=v(d),n=t.findIndex((function(t){return t._id===e}));t.splice(n,1),f(d,t)}(n))}function u(){return(u=e(o)(e(c).mark((function t(n){var r,a,o,s,i,l,u,_,h,w,b;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.includes("video")&&!n.includes("slideshow")){e.next=2;break}return e.abrupt("return",console.log("wrong news"));case 2:return e.next=4,p(n);case 4:r=e.sent,a=r.response.docs[0],o=a._id,s=a.section_name,i=a.abstract,l=a.pub_date,u=a.web_url,_=a.headline.main,h=0===a.multimedia.length?"https://user-images.githubusercontent.com/110947394/222411348-dc3ba506-91e5-4318-9a9e-89fcf1a764a8.jpg":"https://static01.nyt.com/".concat(a.multimedia[0].url),w={_id:o,section_name:s,abstract:i,pub_date:l,web_url:u,photoUrl:h,title:_},void 0===(b=v(d))?f(d,[w]):(b.push(w),f(d,b));case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function f(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error(e)}}function v(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error(e)}}function p(e){return _.apply(this,arguments)}function _(){return(_=e(o)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(i,'?fq=_id:("').concat(n,'")&api-key=').concat(s)).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}var h=document.getElementById("favorite-articles");function w(){var e="";h.innerHTML="";var t=v("favorites");void 0!==t&&t.forEach((function(t){return e+=function(e){var t=e._id,n=e.section_name,r=e.abstract,a=e.pub_date,o=e.web_url,c=e.photoUrl,s=e.title;return'\n            <div class="news-card">\n              <img src="'.concat(c,'" alt="заглушка" />\n              <div class="news-card__info">\n                <div class="news-card__category">').concat(n,'</div>\n                <button class="news-card__favorite-btn active_btn"\n                data-news-id="').concat(t,'">\n                  \'Remove from Favorite\'\n                </button>\n                <h2 class="news-card__title">').concat(s,'</h2>\n                <p class="news-card__description">').concat(r.length>100?r.substring(0,100)+"...":r,'</p>\n                <div class="news-card__date-div">\n                <div class="news-card__date">').concat(new Date(a).toLocaleDateString(),'</div>\n                <button class="btn-read-more news-card__read-more">\n                <ahref="').concat(o,'" target="_blank">Read more</ahref=>\n                </button>\n                </div>\n              </div>\n            </div>\n          ')}(t)})),""!==e&&void 0!==t||(e='\n  <div class="favorite-news__none">\n    <p class="favorite-news__none__title">We haven\'t found news on this page</p>\n  </div>'),h.insertAdjacentHTML("beforeend",e)}w(),h.addEventListener("click",(function(e){null!==e.target.closest(".news-card__favorite-btn")&&(l(e),w())}))}();
//# sourceMappingURL=favorite.8ae36f6f.js.map
