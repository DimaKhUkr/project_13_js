{"mappings":"AAAA,MAMMA,EAAWC,SAASC,eAAe,aAqFzCF,EAASG,iBAAiB,SAASC,IAElB,OADAA,EAAMC,OAAOC,QAAQ,6BAhBtC,SAAwBF,GACtB,MAAMG,EAASH,EAAMC,OACfG,EAASD,EAAOE,QAAQD,OAEqB,OAA/CE,aAAaC,QAAQ,YAAYH,MACnCE,aAAaE,WAAW,YAAYJ,KACpCD,EAAOM,YAAc,kBACrBN,EAAOO,UAAUC,OAAO,YAExBL,aAAaM,QAAQ,YAAYR,KAAU,GAC3CD,EAAOM,YAAc,uBACrBN,EAAOO,UAAUG,IAAI,U,CAOrBC,CAAed,EAAM,IC5FLH,SAASC,eAAe,cAEhCC,iBAAiB,UDoBtBgB,eAA8BC,GACnCA,EAAEC,iBACF,MAAMC,EAAQF,EAAEf,OAAOkB,SAASC,OAAOC,MACvCC,QAAQC,IAAIL,GACZ,MAAMM,EAAW,kCACjB5B,EAAS6B,kBACT,MAAMC,QAtBDX,eAA6BG,GAGlC,MAAMS,EAAM,8DAA8DT,6CAC1E,IACE,aAAaU,MAAMD,EAAK,CACtBE,QAAS,CACP,eAAgB,sBAEjBC,MAAKC,GAAQA,EAAKC,Q,CAErB,MAAOC,GACPX,QAAQW,MAAMA,E,EAUOC,CAAchB,GACrCI,QAAQa,IAAIT,EAASA,SAASU,MACQ,IAAlCV,EAASA,SAASU,KAAKC,SACzBf,QAAQC,IAAIG,EAASA,SAASU,KAAKC,QACnCzC,EAAS0C,UAAY,kDACDd,4CAGtB,MAAMe,EAAYb,EAASA,SAASU,KAAKI,KAAIC,IAC3C,MAAMC,EAAQD,EAAKE,SAASC,MACtBC,IAAEA,EAAGC,aAAEA,EAAYC,SAAEA,EAAQC,SAAEA,EAAQC,QAAEA,GAAYR,EACrDS,EAAyD,OAA5C5C,aAAaC,QAAQ,YAAYsC,KACpD,MAAO,8DAEarB,mHAEyBsB,iEAEjCI,EAAa,SAAW,qBACPL,wBACfK,EAAa,uBAAyB,0FAEXR,2DAE7BK,EAASV,OAAS,IACdU,EAASI,UAAU,EAAG,KAAO,MAC7BJ,qDAEyB,IAAIK,KACjCJ,GACAK,mFACsCJ,kFAG7C,IAEPrD,EAAS0C,UAAYC,EAAUe,KAAK,G","sources":["src/js/sendrequest.js","src/index.js"],"sourcesContent":["const API_KEY = 'u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn';\n// const photoUrl = `./images/asia.jpg`;\n\n// const inputSearch = document.getElementById('inputrequest');\n\n// inputSearch.addEventListener('submit', articleSearch(e));\nconst mainPage = document.getElementById('main-page');\n\nexport async function articleSearch(query) {\n  //   e.preventDefault();\n  //   const query = e.value;\n  const url = `https://api.nytimes.com/svc/search/v2/articlesearch.json?q=${query}&api-key=${API_KEY}`;\n  try {\n    return await fetch(url, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    }).then(resp => resp.json());\n    //   .then(res => console.log(res));\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nexport async function createMainPage(e) {\n  e.preventDefault();\n  const query = e.target.elements.search.value;\n  console.log(query);\n  const photoUrl = 'https://via.placeholder.com/400';\n  mainPage.replaceChildren();\n  const response = await articleSearch(query);\n  console.dir(response.response.docs);\n  if (response.response.docs.length === 0) {\n    console.log(response.response.docs.length);\n    mainPage.innerHTML = `<div class=\"news-card\">\n            <img src=\"${photoUrl}\" alt=\"заглушка\" />\n            </div>`;\n  }\n  const newsCards = response.response.docs.map(news => {\n    const title = news.headline.main;\n    const { _id, section_name, abstract, pub_date, web_url } = news;\n    const isFavorite = localStorage.getItem(`favorite_${_id}`) !== null;\n    return `\n          <div class=\"news-card\">\n            <img src=\"${photoUrl}\" alt=\"заглушка\" />\n            <div class=\"news-card__info\">\n              <div class=\"news-card__category\">${section_name}</div>\n              <button class=\"news-card__favorite-btn ${\n                isFavorite ? 'active' : ''\n              }\" data-news-id=\"${_id}\">\n                ${isFavorite ? 'Remove from Favorite' : 'Add to Favorite'}\n              </button>\n              <h2 class=\"news-card__title\">${title}</h2>\n              <p class=\"news-card__description\">${\n                abstract.length > 100\n                  ? abstract.substring(0, 100) + '...'\n                  : abstract\n              }</p>\n              <div class=\"news-card__date\">${new Date(\n                pub_date\n              ).toLocaleDateString()}</div>\n              <a class=\"news-card__read-more\" href=\"${web_url}\" target=\"_blank\">Read more</a>\n            </div>\n          </div>\n        `;\n  });\n  mainPage.innerHTML = newsCards.join('');\n}\n\n// docs.headline.main - название статьи\n// docs.lead_paragraph - начало статьи\n// docs.pub_date - дата статьи\n// docs.web_url - ссылка на статью\n// docs.section_name - категория\n\n// Добавление/удаление новости из избранного\nfunction toggleFavorite(event) {\n  const button = event.target;\n  const newsId = button.dataset.newsId;\n\n  if (localStorage.getItem(`favorite_${newsId}`) !== null) {\n    localStorage.removeItem(`favorite_${newsId}`);\n    button.textContent = 'Add to Favorite';\n    button.classList.remove('active');\n  } else {\n    localStorage.setItem(`favorite_${newsId}`, true);\n    button.textContent = 'Remove from Favorite';\n    button.classList.add('active');\n  }\n}\n\nmainPage.addEventListener('click', event => {\n  const button = event.target.closest('.news-card__favorite-btn');\n  if (button !== null) {\n    toggleFavorite(event);\n  }\n});\n","import { createMainPage } from './js/sendrequest';\n\nconst inputSearch = document.getElementById('searchForm');\n\ninputSearch.addEventListener('submit', createMainPage);\n"],"names":["$457cad0f7cadee7f$var$mainPage","document","getElementById","addEventListener","event","target","closest","button","newsId","dataset","localStorage","getItem","removeItem","textContent","classList","remove","setItem","add","$457cad0f7cadee7f$var$toggleFavorite","async","e","preventDefault","query","elements","search","value","console","log","photoUrl","replaceChildren","response","url","fetch","headers","then","resp","json","error","$457cad0f7cadee7f$export$de0b15fd56f34d10","dir","docs","length","innerHTML","newsCards","map","news","title","headline","main","_id","section_name","abstract","pub_date","web_url","isFavorite","substring","Date","toLocaleDateString","join"],"version":3,"file":"favorite.d4792171.js.map"}