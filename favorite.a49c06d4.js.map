{"mappings":"AAIA,SAASA,EAAmBC,GAC1B,MAAMC,EAASD,EAAME,OACfC,EAASF,EAAOG,QAAQD,OAE1BF,EAAOI,YAAYC,SAAS,QAC9BL,EAAOI,YAAc,uBACrBJ,EAAOM,UAAUC,IAAI,cAWAC,eAAYN,GAGD,GAA9BA,EAAOG,SAAS,UAAYH,EAAOG,SAAS,aAC9C,OAAOI,QAAQC,IAAI,cAIP,MACRC,SA4DaH,eAAUI,GAC7B,IACE,aAAaC,MACX,qEAA0BD,gDAC1BE,MAAKC,GAAQA,EAAKC,Q,CAEpB,MAAOC,GACPR,QAAQQ,MAAMA,E,EApEGC,CAAgBhB,IACjBiB,SAASC,KAAK,IAI1BC,IAAEA,EAAGC,aAAEA,EAAYC,SAAEA,EAAQC,SAAEA,EAAQC,QAAEA,GAAYd,EACrDe,EAAQf,EAAKgB,SAASC,KACtBC,EACuB,IAA3BlB,EAAKmB,WAAWC,OACZ,yGACA,4BAA4BpB,EAAKmB,WAAW,GAAGE,MAG/CC,EAAa,C,IACjBZ,E,aACAC,E,SACAC,E,SACAC,E,QACAC,E,SACAI,E,MACAH,GAGIQ,EAAcC,EAlDL,kBAmDKC,IAAhBF,EACFG,EApDa,YAoDW,CAACJ,KAEzBC,EAAYI,KAAKL,GACjBI,EAvDa,YAuDWH,G,CA9CxBK,CAAsBrC,KAEtBO,QAAQC,IAAI,mBACZV,EAAOI,YAAc,kBACrBJ,EAAOM,UAAUkC,OAAO,cA+CH,SAAWtC,GAClC,MAAMgC,EAAcC,EA7DL,aA8DTM,EAAYP,EAAYQ,WAAU/B,GAAQA,EAAKU,MAAQnB,IAC7DgC,EAAYS,OAAOF,EAAW,GAC9BJ,EAhEe,YAgESH,E,CAlDtBU,CAA2B1C,G,CAsDM,SAA5BmC,EAAcQ,EAAKC,GAC1B,IACE,MAAMC,EAAOC,KAAKC,UAAUH,GAC5BI,aAAaC,QAAQN,EAAKE,E,CAC1B,MAAO9B,GACPR,QAAQQ,MAAMA,E,EAK8B,SAAvCkB,EAAgBU,GACvB,IACE,MAAMO,EAAYF,aAAaG,QAAQR,GACvC,OAAqB,OAAdO,OAAqBhB,EAAYY,KAAKM,MAAMF,E,CACnD,MAAOnC,GACPR,QAAQQ,MAAMA,E,ECnFlB,MAEMsC,EAAkBC,SAASC,eAAe,qBAaZ,SAA3BC,IACP,IAAIC,EAAS,GAEbJ,EAAgBK,UAAY,GAE5B,MAAM1B,EAAcC,EApBD,kBAqBCC,IAAhBF,GACJA,EAAY2B,SAAQlD,GAASgD,GAiBH,SAAIhD,GAE9B,MAAMU,IAAEA,EAAGC,aAAEA,EAAYC,SAAEA,EAAQC,SAAEA,EAAQC,QAAEA,EAAOI,SAAEA,EAAQH,MAAEA,GAChEf,EACF,MAAO,kEAEiBkB,uHAEyBP,8GAEnBD,0HAGeK,6DAE7BH,EAASQ,OAAS,IACdR,EAASuC,UAAU,EAAG,KAAO,MAC7BvC,0GAGyB,IAAIwC,KACjCvC,GACAwC,4HAEQvC,gJ,CAzCuBwC,CAAuBtD,KAGvD,KAAXgD,QAAiCvB,IAAhBF,IAA2ByB,EAOzC,sIALPJ,EAAgBW,mBAAmB,YAAaP,E,CAvBlDD,IAEAH,EAAgBY,iBAAiB,SAASpE,IAEzB,OADAA,EAAME,OAAOmE,QAAQ,8BAElCtE,EAAmBC,GACnB2D,I","sources":["src/js/local-storage.js","src/js/favorites.js"],"sourcesContent":["const API_KEY = 'u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn';\nconst URL_SEARCH = 'https://api.nytimes.com/svc/search/v2/articlesearch.json';\nconst STOR_KEY = 'favorites';\n\nfunction toggleFavoriteNews(event) {\n  const button = event.target;\n  const newsId = button.dataset.newsId;\n\n  if (button.textContent.includes('Add')) {\n    button.textContent = 'Remove from Favorite';\n    button.classList.add('active_btn');\n    addNewsToLocalStorage(newsId);\n  } else {\n    console.log('delete from fav');\n    button.textContent = 'Add to Favorite';\n    button.classList.remove('active_btn');\n    deleteNewsFromLocalStorage(newsId);\n  }\n}\n\n// ----- функція додавання новини в ЛС\nasync function addNewsToLocalStorage(newsId) {\n\n  // -----  перевіряємо чи додається \"погана\" новина\n  if (newsId.includes('video') || newsId.includes('slideshow')) {\n    return console.log('wrong news');\n  }\n\n  // ----- запит до бекенду\n  const data = await getFavoriteNews(newsId);\n  const news = data.response.docs[0];\n  // console.log('news=', news);\n\n  // ----- змінні для об'єкту з новиною\n  const { _id, section_name, abstract, pub_date, web_url } = news;\n  const title = news.headline.main;\n  const photoUrl =\n    news.multimedia.length === 0\n      ? 'https://user-images.githubusercontent.com/110947394/222411348-dc3ba506-91e5-4318-9a9e-89fcf1a764a8.jpg'\n      : `https://static01.nyt.com/${news.multimedia[0].url}`;\n\n  // ----- запис об'єку новини в ЛС\n  const newsObject = {\n    _id,\n    section_name,\n    abstract,\n    pub_date,\n    web_url,\n    photoUrl,\n    title,\n  };\n\n  const currentData = loadFromStorage(STOR_KEY);\n  if (currentData === undefined) {\n    saveToStorage(STOR_KEY, [newsObject]);\n  } else {\n    currentData.push(newsObject);\n    saveToStorage(STOR_KEY, currentData);\n  }\n}\n\n// ----- функція видалення новини з ЛС\nfunction deleteNewsFromLocalStorage(newsId) {\n  const currentData = loadFromStorage(STOR_KEY);\n  const newsIndex = currentData.findIndex(news => news._id === newsId);\n  currentData.splice(newsIndex, 1);\n  saveToStorage(STOR_KEY, currentData);\n}\n\n// ----- функція запису даних в ЛС, пара ключ/значення\nfunction saveToStorage(key, value) {\n  try {\n    const data = JSON.stringify(value);\n    localStorage.setItem(key, data);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n// ----- функція завантаження даних з ЛС по ключу або und якщо не існує\nfunction loadFromStorage(key) {\n  try {\n    const localData = localStorage.getItem(key);\n    return localData === null ? undefined : JSON.parse(localData);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n// ----- функція запиту на бекенд\nasync function getFavoriteNews(query) {\n  try {\n    return await fetch(\n      `${URL_SEARCH}?fq=_id:(\"${query}\")&api-key=${API_KEY}`\n    ).then(resp => resp.json());\n    //   .then(res => console.log(res))\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n// функція перевірки у вибраному при відмальовці картки новини\nfunction isNewsInFavorites(newsId) {\n  const currentData = loadFromStorage(STOR_KEY);\n  const isFavorit = currentData.some(news => news._id === newsId);\n  return isFavorit;\n}\n\nexport { loadFromStorage, toggleFavoriteNews, isNewsInFavorites };\n","import { loadFromStorage, toggleFavoriteNews } from './local-storage';\n\nconst STOR_KEY_FAV = 'favorites';\n\nconst placeForFavNews = document.getElementById('favorite-articles');\n\ncreateFavoritePage();\n\nplaceForFavNews.addEventListener('click', event => {\n  const button = event.target.closest('.news-card__favorite-btn');\n  if (button !== null) {\n    toggleFavoriteNews(event);\n    createFavoritePage();\n  }\n});\n\n// ----- функція створення сторінки обраних новин\nfunction createFavoritePage() {\n  let markup = '';\n\n  placeForFavNews.innerHTML = '';\n\n  const currentData = loadFromStorage(STOR_KEY_FAV);\n  if (currentData !== undefined) { \n  currentData.forEach(news => (markup = markup + createFavoriteNewsCard(news)));\n  }\n  \n  if (markup === '' || currentData === undefined) markup = noNewsInFavorite();\n\n  placeForFavNews.insertAdjacentHTML('beforeend', markup);\n}\n\n// ----- функція картинки коли нема вибраних новин\nfunction noNewsInFavorite() {\n  return `\n  <div class=\"favorite-news__none\">\n    <p class=\"favorite-news__none__title\">We haven't found news on this page</p>\n  </div>`;\n}\n\n// ----- функція створення картки новини\nfunction createFavoriteNewsCard(news) {\n\n  const { _id, section_name, abstract, pub_date, web_url, photoUrl, title } =\n    news;\n  return `\n            <div class=\"news-card\">\n              <img src=\"${photoUrl}\" alt=\"заглушка\" />\n              <div class=\"news-card__info\">\n                <div class=\"news-card__category\">${section_name}</div>\n                <button class=\"news-card__favorite-btn active_btn\"\n                data-news-id=\"${_id}\">\n                  'Remove from Favorite'\n                </button>\n                <h2 class=\"news-card__title\">${title}</h2>\n                <p class=\"news-card__description\">${\n                  abstract.length > 100\n                    ? abstract.substring(0, 100) + '...'\n                    : abstract\n                }</p>\n                <div class=\"news-card__date-div\">\n                <div class=\"news-card__date\">${new Date(\n                  pub_date\n                ).toLocaleDateString()}</div>\n                <button class=\"btn-read-more news-card__read-more\">\n                <ahref=\"${web_url}\" target=\"_blank\">Read more</ahref=>\n                </button>\n                </div>\n              </div>\n            </div>\n          `;\n}\n\n"],"names":["$8125d1701b78b442$export$e3bacd4ba36e1f7c","event","button","target","newsId","dataset","textContent","includes","classList","add","async","console","log","news","query","fetch","then","resp","json","error","$8125d1701b78b442$var$getFavoriteNews","response","docs","_id","section_name","abstract","pub_date","web_url","title","headline","main","photoUrl","multimedia","length","url","newsObject","currentData","$8125d1701b78b442$export$b366658078313913","undefined","$8125d1701b78b442$var$saveToStorage","push","$8125d1701b78b442$var$addNewsToLocalStorage","remove","newsIndex","findIndex","splice","$8125d1701b78b442$var$deleteNewsFromLocalStorage","key","value","data","JSON","stringify","localStorage","setItem","localData","getItem","parse","$7f07f86ee49d81c7$var$placeForFavNews","document","getElementById","$7f07f86ee49d81c7$var$createFavoritePage","markup","innerHTML","forEach","substring","Date","toLocaleDateString","$7f07f86ee49d81c7$var$createFavoriteNewsCard","insertAdjacentHTML","addEventListener","closest"],"version":3,"file":"favorite.a49c06d4.js.map"}