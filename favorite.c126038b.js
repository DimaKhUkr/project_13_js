const e=document.getElementById("weather");function t(){e.innerHTML='<div class="weather__loading"><img src="https://github.com/AlexMakhony/Final_project_js/blob/main/chost.gif?raw=true" alt="Loading..."></div>',navigator.geolocation.getCurrentPosition((e=>{n(e.coords.latitude,e.coords.longitude)}),(e=>{console.error(e),n()}))}async function n(t,n){let a;a=t&&n?`https://api.openweathermap.org/data/2.5/forecast?lat=${t}&lon=${n}&appid=f5984abfd7be02d0f0f71396692dd7ba&units=metric`:"https://api.openweathermap.org/data/2.5/forecast?units=metric&q=Kyiv&appid=f5984abfd7be02d0f0f71396692dd7ba";try{const t=await fetch(a),n=await t.json();t.ok?function(t){const n=t.city.coord.lat,a=t.city.coord.lon;console.log(t);const o="https://openweathermap.org/img/wn/",s=t.list[0],i=Math.round(s.main.temp),c=s.weather[0].description,r=t.city.name,d=`${o}${s.weather[0].icon}@4x.png`,l=(new Date).toLocaleDateString("en-US",{weekday:"short"}),m=(new Date).toLocaleDateString("en-US",{day:"numeric"}).toUpperCase(),u=(new Date).toLocaleDateString("en-US",{month:"short"}),p=(new Date).toLocaleDateString("en-US",{year:"numeric"}).toUpperCase();let h=`<div class="header__weather">\n          <div class="temp__info">${i}°</div>\n          <div class="status__location">\n            <div class="status">\n              <p class="status__name">${c}</p>\n            </div>\n            <div class="location">\n              <img src="https://raw.githubusercontent.com/AlexMakhony/Final_project_js/6cf166ba0d110ff0a2ce6b8f26f2dd802ee28f35/Vector.svg" alt="checkpoint">\n              <p class="location__name">${r}</p>\n              </div>\n            </div>\n          </div>\n          <div class="icon__picture">\n            <img class="weather__picture" src="${d}" alt="Clouds">\n          </div>\n          <div class="date__wrapper">\n            <div class="day">${l}</div>\n            <div class="date">${m} ${u} ${p}</div>\n          </div>\n          <button class="weatherForweek" id="weatherForweek">Weather for 5 days</button>\n          `;e.innerHTML=h;document.getElementById("weatherForweek").addEventListener("click",(()=>async function(t,n){const a=`https://api.openweathermap.org/data/2.5/forecast?lat=${t}&lon=${n}&appid=f5984abfd7be02d0f0f71396692dd7ba&units=metric`;try{const t=await fetch(a),n=await t.json();t.ok?function(t){const n=[];let a=new Date(t.list[0].dt_txt).getDate(),o=new Date(t.list[0].dt_txt).toLocaleDateString("en-US",{weekday:"short"}),s=t.list[0].main.temp,i=t.list[0].main.temp,c=t.list[0].weather[0].icon,r=`https://openweathermap.org/img/wn/${c}.png`;for(let e=1;e<t.list.length;e++){const d=new Date(t.list[e].dt_txt),l=d.getDate();if(l!==a){const m=d.toLocaleDateString("en-US",{month:"short"});n.push({dayOfWeek:o,dayOfMonth:a,month:m,tempMin:s,tempMax:i,iconUrl:r}),a=l,o=d.toLocaleDateString("en-US",{weekday:"short"}),s=t.list[e].main.temp,i=t.list[e].main.temp,c=t.list[e].weather[0].icon,r=`https://openweathermap.org/img/wn/${c}.png`}else t.list[e].main.temp<s&&(s=t.list[e].main.temp),t.list[e].main.temp>i&&(i=t.list[e].main.temp)}e.innerHTML="";const d=document.createElement("button");e.appendChild(d).classList.add("backBtn"),d.innerHTML="Back",d.addEventListener("click",(()=>{window.location.reload()})),n.forEach((t=>{const{dayOfWeek:n,dayOfMonth:a,month:o,tempMin:s,tempMax:i,iconUrl:c}=t,r=`\n        <div class="day__card">\n          <div class="dayOfMonth">${a}</div>\n          <div class="dayOfWeek">${n}</div>\n        </div>\n        <div class="iconUrl">\n            <img class="weather__picture__5days" src="${c}" alt="weather4days">\n          </div>\n        <div class="icon__status">\n          <div class="tempMax">Max temp:${Math.round(i)}°</div>\n          <div class="tempMin">Min temp:${Math.round(s)}°</div>\n        </div>\n      `,d=document.createElement("div");d.innerHTML=r,e.appendChild(d).classList.add("forecast__wrapper")}))}(n):e.innerHTML=n.message}catch(e){console.error(e)}}(n,a)))}(n):e.innerHTML=n.message}catch(e){console.error(e)}}let a=0,o=0;function s(e){const t=document.querySelector(".pagination");t.innerHTML="",a=Math.ceil(e/10),a>100&&(a=100);const n=document.createElement("button");n.textContent="1",n.classList="dot",0===o&&n.classList.add("dot-active"),n.addEventListener("click",(()=>{o=0,c()})),t.appendChild(n);const s=document.createElement("button");s.textContent="< Prew",s.classList="prev dot",0===o&&(s.disabled=!0),s.addEventListener("click",(()=>{o--,c()})),t.insertBefore(s,t.firstChild);let i=Math.max(1,o),r=Math.min(a-1,o+2);if(window.innerWidth>767&&(i=Math.max(1,o),r=Math.min(a-1,o+3)),i>1){const e=document.createElement("button");e.textContent="...",e.disabled=!0,e.classList="dots",t.appendChild(e)}for(let e=i;e<r;e++){const n=document.createElement("button");n.textContent=e+1,n.classList="dot",e===o&&n.classList.add("dot-active"),n.addEventListener("click",(()=>{o=e,c()})),t.appendChild(n)}if(r<a-1){const e=document.createElement("button");e.textContent="...",e.disabled=!0,e.classList="dots",t.appendChild(e)}if(a>1){const e=document.createElement("button");e.textContent=a,e.classList="dot",o===a-1&&e.classList.add("dot-active"),e.addEventListener("click",(()=>{o=a-1,c()})),t.appendChild(e)}const d=document.createElement("button");d.textContent="Next >",d.classList="next dot",o===a-1&&(d.disabled=!0),d.addEventListener("click",(()=>{o++,c()})),t.appendChild(d)}function i(){document.getElementById("loader-container").style.display="none",document.getElementById("pagination").style.display="flex"}function c(){document.getElementById("loader-container").style.display="flex",document.getElementById("pagination").style.display="none",setTimeout(i,1e3),f(o),s()}const r=[];const d=document.getElementById("main-page"),l=document.querySelector(".wraper__weather"),m=document.getElementById("empty"),u=document.getElementById("searchForm");let p="",h=0,v=0,g="";async function f(e){m.setAttribute("hidden","");const n=await async function(e){const t=g+`&page=${e}`;console.log(t);try{return await fetch(t,{headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}catch(e){console.error(e)}}(e);console.dir(n.response),0===n.response.docs.length?(Array.from(d.children).forEach((e=>{e!==m&&e!==l&&e.remove()})),console.log(n.response.docs.length),m.removeAttribute("hidden"),l.setAttribute("hidden",""),u.elements.search.value=""):(Array.from(d.children).forEach((e=>{e!==l&&e!==m&&e.remove()})),l.removeAttribute("hidden"));const a=n.response.docs.map((e=>{const t=e.headline.main,n=0!==e.multimedia.length?`https://static01.nyt.com/${e.multimedia[0].url}`:"https://user-images.githubusercontent.com/110947394/222411348-dc3ba506-91e5-4318-9a9e-89fcf1a764a8.jpg",{_id:a,section_name:o,abstract:s,pub_date:i,web_url:c}=e,r=null!==localStorage.getItem(`favorite_${a}`);return`\n          <div class="news-card" id="${a}">\n            <img src="${n}" alt="заглушка" />\n            <div class="news-card__info">\n              <div class="news-card__category">${o}</div>\n              <button class="news-card__favorite-btn ${r?"active_btn":""}" data-news-id="${a}">\n                ${r?"Remove from Favorite":"Add to Favorite"}\n              </button>\n              <h2 class="news-card__title">${t}</h2>\n              <p class="news-card__description">${s.length>100?s.substring(0,100)+"...":s}</p>\n              <div class="news-card__date-div">\n              <div class="news-card__date">${new Date(i).toLocaleDateString()}</div>\n              <button class="btn-read-more news-card__read-more">\n              <ahref="${c}" target="_blank">Read more</ahref=>\n              </button>\n              </div>\n            </div>\n          </div>\n        `}));d.insertAdjacentHTML("beforeend",a.join("")),document.addEventListener("DOMContentLoaded",t),h=n.response.meta.hits,console.log(h),u.elements.search.value="",0!==n.response.docs.length&&s(h)}u.addEventListener("submit",(e=>{e.preventDefault(),v=0,p=e.target.elements.search.value.trim(),console.log(v,p),g=`https://api.nytimes.com/svc/search/v2/articlesearch.json?q=${p}&api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn`,f(v)})),d.addEventListener("click",(e=>{null!==e.target.closest(".news-card__favorite-btn")&&function(e){const t=e.target,n=t.dataset.newsId;null!==localStorage.getItem(`favorite_${n}`)?(localStorage.removeItem(`favorite_${n}`),t.textContent="Add to Favorite",t.classList.remove("active_btn")):(localStorage.setItem(`favorite_${n}`,!0),t.textContent="Remove from Favorite",t.classList.add("active_btn"))}(e)})),d.addEventListener("click",(function(e){let t=null;const n=(new Date).toLocaleDateString("en-GB");if(e.target.closest(".news-card__read-more")){if(t=e.target.closest(".news-card"),t&&t.classList.add("reading_card"),r.includes(`${t.id}`))return;r.push(`${t.id}`),localStorage.setItem(`${n}`,JSON.stringify(r))}}));const _=document.getElementById("category-btn"),w=document.getElementById("main-page"),b=document.querySelector(".wraper__weather"),y=document.getElementById("empty");async function $(e){const t=`https://api.nytimes.com/svc/news/v3/content/nyt/${e}.json?api-key=t8X9JXlP7JTQb4JOFaZ7soveQbwr46sH`;try{const e=await fetch(t,{headers:{"Content-Type":"application/json"}}),n=(await e.json()).results;console.log(n),function(e){y.setAttribute("hidden",""),0===e.length?(Array.from(w.children).forEach((e=>{e!==y&&e!==b&&e.remove()})),console.log(e.length),y.removeAttribute("hidden"),b.setAttribute("hidden","")):(Array.from(w.children).forEach((e=>{e!==b&&e!==y&&e.remove()})),b.removeAttribute("hidden"));const t=e.map((e=>{const t=null!==e.multimedia?e.multimedia[2].url:"https://user-images.githubusercontent.com/110947394/222411348-dc3ba506-91e5-4318-9a9e-89fcf1a764a8.jpg",{section:n,abstract:a,title:o,url:s,uri:i,published_date:c}=e,r=null!==localStorage.getItem(`favorite_${i}`);return`<div class ="news-card">\n        <img src="${t}" alt="photo"/>\n        <div class="news-card__info">\n        <div class="news-card__category">${n}</div>\n        <button class="news-card__favorite-btn ${r?"active_btn":""}" data-news-id="${i}">\n                ${r?"Remove from Favorite":"Add to Favorite"}\n              </button>\n              <h2 class="news-card__title">${o}</h2>\n              <p class="news-card__description">${a.length>100?a.substring(0,100)+"...":a}</p>\n              <div class="news-card__date-div">\n              <div class="news-card__date">${new Date(c).toLocaleDateString()}</div>\n              <a class="news-card__read-more" href="${s}" target="_blank">Read more</a>\n            </div>\n          </div>\n          </div>`})).join("");w.insertAdjacentHTML("beforeend",t)}(n)}catch(e){console.error(e)}}!async function(){try{await fetch("https://api.nytimes.com/svc/news/v3/content/section-list.json?api-key=t8X9JXlP7JTQb4JOFaZ7soveQbwr46sH",{headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=[];for(const n of e.results)t.push(n.display_name);return t})).then((e=>{if(window.innerWidth<768){_.insertAdjacentHTML("beforeend",'<select name="Others" class="select_btn">\n            <option value="Others" hidden>Categories</option>\n            </select>');const t=document.querySelector(".select_btn");for(let n=0;n<e.length;n++)t.insertAdjacentHTML("beforeend",`<option value="${e[n]}">${e[n]}</option>`)}if(window.innerWidth>=768&&window.innerWidth<1280){for(let t=0;t<=3;t++)_.insertAdjacentHTML("beforeend",`<button type="button" class="category_btn">${e[t]}</button>`);_.insertAdjacentHTML("beforeend",'<select name="Others" class="select_btn">\n            <option value="Others" hidden>Others</option>\n            </select>');const t=document.querySelector(".select_btn");for(let n=4;n<e.length;n++)t.insertAdjacentHTML("beforeend",`<option value="${e[n]}">${e[n]}</option>`)}if(window.innerWidth>=1280){for(let t=0;t<=5;t++)_.insertAdjacentHTML("beforeend",`<button type="button" class="category_btn">${e[t]}</button>`);_.insertAdjacentHTML("beforeend",'<select name="Others" class="select_btn">\n            <option value="Others" hidden>Others</option>\n            </select>');const t=document.querySelector(".select_btn");for(let n=6;n<e.length;n++)t.insertAdjacentHTML("beforeend",`<option value="${e[n]}">${e[n]}</option>`)}document.querySelectorAll(".category_btn").forEach((e=>{e.addEventListener("click",(async t=>{t.preventDefault();const n=e.textContent.toLowerCase();console.log(n),$(n)}))}));document.querySelector(".select_btn").addEventListener("change",(async e=>{const t=e.currentTarget.value.toLowerCase();e.preventDefault(),console.log(t),$(t)}))}))}catch(e){console.error(e)}}(),async function(){l.removeAttribute("hidden");const e=await async function(){try{return await fetch("https://api.nytimes.com/svc/mostpopular/v2/viewed/7.json?api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn",{headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}catch(e){console.error(e)}}();console.log(e.results);const n=e.results.map((e=>{const t=0!==e.media.length?e.media[0]["media-metadata"][2].url:"https://user-images.githubusercontent.com/110947394/222411348-dc3ba506-91e5-4318-9a9e-89fcf1a764a8.jpg",{id:n,title:a,abstract:o,published_date:s,url:i,section:c,uri:r}=e,d=null!==localStorage.getItem(`favorite_${r}`);return`<div class="news-card" id="${n}">\n            <img src="${t}" alt="заглушка" />\n            <div class="news-card__info">\n              <div class="news-card__category">${c}</div>\n              <button class="news-card__favorite-btn ${d?"active_btn":""}" data-news-id="${r}">\n                ${d?"Remove from Favorite":"Add to Favorite"}\n              </button>\n              <h2 class="news-card__title">${a}</h2>\n              <p class="news-card__description">${o.length>100?o.substring(0,100)+"...":o}</p>\n              <div class="news-card__date-div">\n              <div class="news-card__date">${new Date(s).toLocaleDateString()}</div>\n              <button class="btn-read-more news-card__read-more">\n              <a href="${i}" target="_blank">Read more</a>\n              </button>\n              </div>\n            </div>\n          </div>`}));d.insertAdjacentHTML("beforeend",n.join("")),document.addEventListener("DOMContentLoaded",t)}(),t();
//# sourceMappingURL=favorite.c126038b.js.map
