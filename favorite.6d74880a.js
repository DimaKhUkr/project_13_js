const t=document.getElementById("weather");function e(){t.innerHTML='<div class="weather__loading"><img src="https://github.com/AlexMakhony/Final_project_js/blob/main/chost.gif?raw=true" alt="Loading..."></div>',navigator.geolocation.getCurrentPosition((t=>{n(t.coords.latitude,t.coords.longitude)}),(t=>{console.error(t),n()}))}async function n(e,n){let a;a=e&&n?`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${n}&appid=f5984abfd7be02d0f0f71396692dd7ba&units=metric`:"https://api.openweathermap.org/data/2.5/forecast?units=metric&q=Kyiv&appid=f5984abfd7be02d0f0f71396692dd7ba";try{const e=await fetch(a),n=await e.json();e.ok?function(e){const n=e.city.coord.lat,a=e.city.coord.lon;console.log(e);const s="https://openweathermap.org/img/wn/",o=e.list[0],c=Math.round(o.main.temp),i=o.weather[0].description,r=e.city.name,d=`${s}${o.weather[0].icon}@4x.png`,l=(new Date).toLocaleDateString("en-US",{weekday:"short"}),m=(new Date).toLocaleDateString("en-US",{day:"numeric"}).toUpperCase(),p=(new Date).toLocaleDateString("en-US",{month:"short"}),u=(new Date).toLocaleDateString("en-US",{year:"numeric"}).toUpperCase();let h=`<div class="header__weather">\n          <div class="temp__info">${c}°</div>\n          <div class="status__location">\n            <div class="status">\n              <p class="status__name">${i}</p>\n            </div>\n            <div class="location">\n              <img src="https://raw.githubusercontent.com/AlexMakhony/Final_project_js/6cf166ba0d110ff0a2ce6b8f26f2dd802ee28f35/Vector.svg" alt="checkpoint">\n              <p class="location__name">${r}</p>\n              </div>\n            </div>\n          </div>\n          <div class="icon__picture">\n            <img class="weather__picture" src="${d}" alt="Clouds">\n          </div>\n          <div class="date__wrapper">\n            <div class="day">${l}</div>\n            <div class="date">${m} ${p} ${u}</div>\n          </div>\n          <button class="weatherForweek" id="weatherForweek">Weather for 5 days</button>\n          `;t.innerHTML=h;document.getElementById("weatherForweek").addEventListener("click",(()=>async function(e,n){const a=`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${n}&appid=f5984abfd7be02d0f0f71396692dd7ba&units=metric`;try{const e=await fetch(a),n=await e.json();e.ok?function(e){const n=[];let a=new Date(e.list[0].dt_txt).getDate(),s=new Date(e.list[0].dt_txt).toLocaleDateString("en-US",{weekday:"short"}),o=e.list[0].main.temp,c=e.list[0].main.temp,i=e.list[0].weather[0].icon,r=`https://openweathermap.org/img/wn/${i}.png`;for(let t=1;t<e.list.length;t++){const d=new Date(e.list[t].dt_txt),l=d.getDate();if(l!==a){const m=d.toLocaleDateString("en-US",{month:"short"});n.push({dayOfWeek:s,dayOfMonth:a,month:m,tempMin:o,tempMax:c,iconUrl:r}),a=l,s=d.toLocaleDateString("en-US",{weekday:"short"}),o=e.list[t].main.temp,c=e.list[t].main.temp,i=e.list[t].weather[0].icon,r=`https://openweathermap.org/img/wn/${i}.png`}else e.list[t].main.temp<o&&(o=e.list[t].main.temp),e.list[t].main.temp>c&&(c=e.list[t].main.temp)}t.innerHTML="";const d=document.createElement("button");t.appendChild(d).classList.add("backBtn"),d.innerHTML="Back",d.addEventListener("click",(()=>{window.location.reload()})),n.forEach((e=>{const{dayOfWeek:n,dayOfMonth:a,month:s,tempMin:o,tempMax:c,iconUrl:i}=e,r=`\n        <div class="day__card">\n          <div class="dayOfMonth">${a}</div>\n          <div class="dayOfWeek">${n}</div>\n        </div>\n        <div class="iconUrl">\n            <img class="weather__picture__5days" src="${i}" alt="weather4days">\n          </div>\n        <div class="icon__status">\n          <div class="tempMax">Max temp:${Math.round(c)}°</div>\n          <div class="tempMin">Min temp:${Math.round(o)}°</div>\n        </div>\n      `,d=document.createElement("div");d.innerHTML=r,t.appendChild(d).classList.add("forecast__wrapper")}))}(n):t.innerHTML=n.message}catch(t){console.error(t)}}(n,a)))}(n):t.innerHTML=n.message}catch(t){console.error(t)}}let a=0,s=0;function o(t){const e=document.querySelector(".pagination");e.innerHTML="",a=Math.ceil(t/10),a>100&&(a=100);const n=document.createElement("button");n.textContent="1",n.classList="dot",0===s&&n.classList.add("dot-active"),n.addEventListener("click",(()=>{s=0,h(s),o()})),e.appendChild(n);const c=document.createElement("button");c.textContent="< Prew",c.classList="prev dot",0===s&&(c.disabled=!0),c.addEventListener("click",(()=>{s--,h(s),o()})),e.insertBefore(c,e.firstChild);let i=Math.max(1,s),r=Math.min(a-1,s+1);if(window.innerWidth>767&&(i=Math.max(1,s-1),r=Math.min(a-1,s+2)),i>1){const t=document.createElement("button");t.textContent="...",t.disabled=!0,t.classList="dots",e.appendChild(t)}for(let t=i;t<r;t++){const n=document.createElement("button");n.textContent=t+1,n.classList="dot",t===s&&n.classList.add("dot-active"),n.addEventListener("click",(()=>{s=t,h(s),o()})),e.appendChild(n)}if(r<a-1){const t=document.createElement("button");t.textContent="...",t.disabled=!0,t.classList="dots",e.appendChild(t)}if(a>1){const t=document.createElement("button");t.textContent=a,t.classList="dot",s===a-1&&t.classList.add("dot-active"),t.addEventListener("click",(()=>{s=a-1,h(s),o()})),e.appendChild(t)}const d=document.createElement("button");d.textContent="Next >",d.classList="next dot",s===a-1&&(d.disabled=!0),d.addEventListener("click",(()=>{s++,h(s),o()})),e.appendChild(d)}const c=document.getElementById("main-page"),i=document.querySelector(".wraper__weather"),r=document.getElementById("empty"),d=(document.getElementById("pagination"),document.getElementById("searchForm"));let l="",m=0,p=0,u="";async function h(t){r.setAttribute("hidden","");const n=await async function(t){const e=u+`&page=${t}`;console.log(e);try{return await fetch(e,{headers:{"Content-Type":"application/json"}}).then((t=>t.json()))}catch(t){console.error(t)}}(t);console.dir(n.response),0===n.response.docs.length?(Array.from(c.children).forEach((t=>{t!==r&&t!==i&&t.remove()})),console.log(n.response.docs.length),r.removeAttribute("hidden"),i.setAttribute("hidden",""),d.elements.search.value=""):(Array.from(c.children).forEach((t=>{t!==i&&t!==r&&t.remove()})),i.removeAttribute("hidden"));const a=n.response.docs.map((t=>{const e=t.headline.main,n=0!==t.multimedia.length?`https://static01.nyt.com/${t.multimedia[0].url}`:"https://user-images.githubusercontent.com/110947394/222411348-dc3ba506-91e5-4318-9a9e-89fcf1a764a8.jpg",{_id:a,section_name:s,abstract:o,pub_date:c,web_url:i}=t,r=null!==localStorage.getItem(`favorite_${a}`);return`\n          <div class="news-card">\n            <img src="${n}" alt="заглушка" />\n            <div class="news-card__info">\n              <div class="news-card__category">${s}</div>\n              <button class="news-card__favorite-btn ${r?"active_btn":""}" data-news-id="${a}">\n                ${r?"Remove from Favorite":"Add to Favorite"}\n              </button>\n              <h2 class="news-card__title">${e}</h2>\n              <p class="news-card__description">${o.length>100?o.substring(0,100)+"...":o}</p>\n              <div class="news-card__date-div">\n              <div class="news-card__date">${new Date(c).toLocaleDateString()}</div>\n              <a class="news-card__read-more" href="${i}" target="_blank">Read more</a>\n              </div>\n            </div>\n          </div>\n        `}));c.insertAdjacentHTML("beforeend",a.join("")),document.addEventListener("DOMContentLoaded",e),m=n.response.meta.hits,console.log(m),d.elements.search.value="",0!==n.response.docs.length&&o(m)}d.addEventListener("submit",(t=>{t.preventDefault(),p=0,l=t.target.elements.search.value.trim(),console.log(p,l),u=`https://api.nytimes.com/svc/search/v2/articlesearch.json?q=${l}&api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn`,h(p)})),c.addEventListener("click",(t=>{null!==t.target.closest(".news-card__favorite-btn")&&function(t){const e=t.target,n=e.dataset.newsId;null!==localStorage.getItem(`favorite_${n}`)?(localStorage.removeItem(`favorite_${n}`),e.textContent="Add to Favorite",e.classList.remove("active_btn")):(localStorage.setItem(`favorite_${n}`,!0),e.textContent="Remove from Favorite",e.classList.add("active_btn"))}(t)}));const v=document.getElementById("category-btn");async function _(t){const e=`https://api.nytimes.com/svc/news/v3/content/nyt/${t}.json?api-key=t8X9JXlP7JTQb4JOFaZ7soveQbwr46sH`;try{const t=await fetch(e,{headers:{"Content-Type":"application/json"}}),n=(await t.json()).results;console.log(n),function(t){const e=t.map((t=>{const e=null!==t.multimedia?t.multimedia[2].url:"https://user-images.githubusercontent.com/110947394/222411348-dc3ba506-91e5-4318-9a9e-89fcf1a764a8.jpg",{section:n,abstract:a,title:s,url:o,uri:c,published_date:i}=t,r=null!==localStorage.getItem(`favorite_${c}`);return`<div class ="news-card">\n        <img src="${e}" alt="photo"/>\n        <div class="news-card__info">\n        <div class="news-card__category">${n}</div>\n        <button class="news-card__favorite-btn ${r?"active_btn":""}" data-news-id="${c}">\n                ${r?"Remove from Favorite":"Add to Favorite"}\n              </button>\n              <h2 class="news-card__title">${s}</h2>\n              <p class="news-card__description">${a.length>100?a.substring(0,100)+"...":a}</p>\n              <div class="news-card__date-div">\n              <div class="news-card__date">${new Date(i).toLocaleDateString()}</div>\n              <a class="news-card__read-more" href="${o}" target="_blank">Read more</a>\n            </div>\n          </div>\n          </div>`})).join("");g.innerHTML=e}(n)}catch(t){console.error(t)}}const g=document.querySelector(".list-cards");!async function(){try{await fetch("https://api.nytimes.com/svc/news/v3/content/section-list.json?api-key=t8X9JXlP7JTQb4JOFaZ7soveQbwr46sH",{headers:{"Content-Type":"application/json"}}).then((t=>t.json())).then((t=>{const e=[];for(const n of t.results)e.push(n.display_name);return e})).then((t=>{for(let e=0;e<=5;e++)v.insertAdjacentHTML("beforeend",`<button type="button" class="category_btn">${t[e]}</button>`);v.insertAdjacentHTML("beforeend",'<select name="Others" class="select_btn">\n            <option value="Others" hidden>Others</option>\n            </select>');const e=document.querySelector(".select_btn");for(let n=6;n<t.length;n++)e.insertAdjacentHTML("beforeend",`<option value="${t[n]}">${t[n]}</option>`);document.querySelectorAll(".category_btn").forEach((t=>{t.addEventListener("click",(async()=>{event.preventDefault();const e=t.textContent.toLowerCase();console.log(e),_(e)}))})),e.addEventListener("change",(async t=>{const e=t.currentTarget.value.toLowerCase();t.preventDefault(),console.log(e),_(e)}))}))}catch(t){console.error(t)}}(),async function(){i.removeAttribute("hidden");const t=await async function(){try{return await fetch("https://api.nytimes.com/svc/mostpopular/v2/viewed/7.json?api-key=u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn",{headers:{"Content-Type":"application/json"}}).then((t=>t.json()))}catch(t){console.error(t)}}();console.log(t.results);const n=t.results.map((t=>{const e=0!==t.media.length?t.media[0]["media-metadata"][2].url:"https://user-images.githubusercontent.com/110947394/222411348-dc3ba506-91e5-4318-9a9e-89fcf1a764a8.jpg",{title:n,abstract:a,published_date:s,url:o,section:c,uri:i}=t,r=null!==localStorage.getItem(`favorite_${i}`);return`<div class="news-card">\n            <img src="${e}" alt="заглушка" />\n            <div class="news-card__info">\n              <div class="news-card__category">${c}</div>\n              <button class="news-card__favorite-btn ${r?"active_btn":""}" data-news-id="${i}">\n                ${r?"Remove from Favorite":"Add to Favorite"}\n              </button>\n              <h2 class="news-card__title">${n}</h2>\n              <p class="news-card__description">${a.length>100?a.substring(0,100)+"...":a}</p>\n              <div class="news-card__date-div">\n              <div class="news-card__date">${new Date(s).toLocaleDateString()}</div>\n              <a class="news-card__read-more" href="${o}" target="_blank">Read more</a>\n              </div>\n            </div>\n          </div>`}));c.insertAdjacentHTML("beforeend",n.join("")),document.addEventListener("DOMContentLoaded",e)}(),e();
//# sourceMappingURL=favorite.6d74880a.js.map
