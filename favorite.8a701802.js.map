{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,aAAMC,EAAU,mCACVC,EAAa,2DAEbC,EAAkBC,SAASC,eAAe,qB,SAmBjCC,I,OAAAC,EAAkBC,MAAAC,KAAAC,U,UAAlBH,I,OAAAA,EAAfI,EAAAZ,EAAA,CAAAY,EAAAC,GAAAC,MAAA,SAAAC,I,IACMC,EAGKC,EACHC,EAGEC,EACEC,EACAC,E,kEATNL,EAAS,GACbZ,EAAgBkB,UAAY,GAEnBL,EAAI,E,YAAGA,EAAIM,aAAaC,QAAM,C,qBACjCN,EAAaK,aAAaE,IAAIR,IAEnBS,SAAS,YAAW,C,uBAC7BP,EAAgBD,EAAWS,MAAM,EAAGT,EAAWM,Q,SAChCI,EAAgBT,G,OAA7BC,EAAIS,EAAAC,KACJT,EAAOD,EAAKW,SAASC,KAC3BhB,GAAkBiB,EAAmBZ,EAAK,I,QAPLJ,I,uBAUzCb,EAAgB8B,mBAAmB,YAAalB,G,6CAdjBP,MAAAC,KAAAC,U,CAiBjC,SAASsB,EAAmBZ,GAC1B,IAAMc,EAAQd,EAAKe,SAASC,KAGtBC,EACgB,IAApBjB,EAAKkB,WACD,4BAAmDC,OAAvBnB,EAAKkB,WAAW,GAAGE,KAC/C,kCAEEC,EAAmDrB,EAAnDqB,IAAKC,EAA8CtB,EAA9CsB,aAAcC,EAAgCvB,EAAhCuB,SAAUC,EAAsBxB,EAAtBwB,SAAUC,EAAYzB,EAAZyB,QAI/C,MAAO,8DAIwCN,OAFzBF,EAAS,mHAIjBE,OAFiCG,EAAa,iEAG7BH,OADJ,aACd,oBACGA,OADeE,EAAI,wBAGQF,OAFd,uBAA2C,0EAI1DA,OAF6BL,EAAM,2DAONK,OAL7BI,EAASpB,OAAS,IACdoB,EAASG,UAAU,EAAG,KAAO,MAC7BH,EACL,sGAKuCJ,OAHT,IAAIQ,KACjCH,GACAI,qBAAqB,gEACyBT,OAARM,EAAQ,wG,UAO/ClB,EAAgBsB,G,OAAhBC,EAAe1C,MAAAC,KAAAC,U,UAAfwC,I,OAAAA,EAAfvC,EAAAZ,EAAA,CAAAY,EAAAC,GAAAC,MAAA,SAAAC,EAA+BmC,G,2FAEdE,MACX,GAA0BZ,OAAvBrC,EAAW,cAA+BqC,OAAnBU,EAAM,eAAqBV,OAARtC,IAC7CmD,MAAK,SAAAC,G,OAAQA,EAAKC,M,4EAEpBC,QAAQC,MAAK5B,EAAA6B,I,yDANajD,MAAAC,KAAAC,U,CA1E9BJ,IAEAH,EAAgBuD,iBAAiB,SAAS,SAAAC,GAEzB,OADAA,EAAMC,OAAOC,QAAQ,6BAMtC,SAA4BF,GAC1B,IACMG,EADSH,EAAMC,OACCG,QAAQD,OAE9BxC,aAAa0C,WAAW,YAAmBzB,OAAPuB,IACpCxD,G,CATE2D,CAAmBN,E","sources":["src/js/favorites.js"],"sourcesContent":["const API_KEY = 'u59IF6VhLyuj5qt5wMVcLGGSUKapZTsn';\nconst URL_SEARCH = 'https://api.nytimes.com/svc/search/v2/articlesearch.json';\n\nconst placeForFavNews = document.getElementById('favorite-articles');\n\ncreateFavoritePage();\n\nplaceForFavNews.addEventListener('click', event => {\n  const button = event.target.closest('.news-card__favorite-btn');\n  if (button !== null) {\n    removeFromFavorite(event);\n  }\n});\n\nfunction removeFromFavorite(event) {\n  const button = event.target;\n  const newsId = button.dataset.newsId;\n\n  localStorage.removeItem(`favorite_${newsId}`);\n  createFavoritePage();\n}\n\nasync function createFavoritePage() {\n  let markup = '';\n  placeForFavNews.innerHTML = '';\n\n  for (let i = 0; i < localStorage.length; i++) {\n    let storageKey = localStorage.key(i);\n\n    if (storageKey.includes('favorite')) {\n      let favoriteQuery = storageKey.slice(9, storageKey.length);\n      const data = await getFavoriteNews(favoriteQuery);\n      const news = data.response.docs;\n      markup = markup + createFavoriteNews(news[0]);\n    }\n  }\n  placeForFavNews.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction createFavoriteNews(news) {\n  const title = news.headline.main;\n  const isFavorite = true;\n\n  const photoUrl =\n    news.multimedia !== 0\n      ? `https://static01.nyt.com/${news.multimedia[0].url}`\n      : 'https://via.placeholder.com/400';\n\n  const { _id, section_name, abstract, pub_date, web_url } = news;\n\n\n\n  return `\n          <div class=\"news-card\">\n            <img src=\"${photoUrl}\" alt=\"заглушка\" />\n            <div class=\"news-card__info\">\n              <div class=\"news-card__category\">${section_name}</div>\n              <button class=\"news-card__favorite-btn ${\n                isFavorite ? 'active_btn' : ''\n              }\" data-news-id=\"${_id}\">\n                ${isFavorite ? 'Remove from Favorite' : 'Add to Favorite'}\n              </button>\n              <h2 class=\"news-card__title\">${title}</h2>\n              <p class=\"news-card__description\">${\n                abstract.length > 100\n                  ? abstract.substring(0, 100) + '...'\n                  : abstract\n              }</p>\n              <div class=\"news-card__date-div\">\n              <div class=\"news-card__date\">${new Date(\n                pub_date\n              ).toLocaleDateString()}</div>\n              <a class=\"news-card__read-more\" href=\"${web_url}\" target=\"_blank\">Read more</a>\n              </div>\n            </div>\n          </div>\n        `;\n}\n\nasync function getFavoriteNews(query) {\n  try {\n    return await fetch(\n      `${URL_SEARCH}?fq=_id:(\"${query}\")&api-key=${API_KEY}`\n    ).then(resp => resp.json());\n  } catch (error) {\n    console.error(error);\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$6befdf793f7dd1b0$var$API_KEY","$6befdf793f7dd1b0$var$URL_SEARCH","$6befdf793f7dd1b0$var$placeForFavNews","document","getElementById","$6befdf793f7dd1b0$var$createFavoritePage","$6befdf793f7dd1b0$var$_createFavoritePage","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","markup","i","storageKey","favoriteQuery","data","news","innerHTML","localStorage","length","key","includes","slice","$6befdf793f7dd1b0$var$getFavoriteNews","_ctx","sent","response","docs","$6befdf793f7dd1b0$var$createFavoriteNews","insertAdjacentHTML","title","headline","main","photoUrl","multimedia","concat","url","_id","section_name","abstract","pub_date","web_url","substring","Date","toLocaleDateString","query","$6befdf793f7dd1b0$var$_getFavoriteNews","fetch","then","resp","json","console","error","t0","addEventListener","event","target","closest","newsId","dataset","removeItem","$6befdf793f7dd1b0$var$removeFromFavorite"],"version":3,"file":"favorite.8a701802.js.map"}